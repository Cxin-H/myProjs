var CS_CONF={"projectId":1426,"status":1,"hostnames":["dior.cn"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":1,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":0,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":0,"autoInsightsEnabled":0,"jsErrorsEnabled":1,"apiErrorsEnabled":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingMaskedUrlRegex":null,"tagDeploymentMode":"CONTENTSQUARE"};!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION"}(e.TagDeploymentMode||(e.TagDeploymentMode={}))},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/(@import\s+url\s*\(\s*(["'])?([^"')]+)(\2)\s*\))|(@import\s+(["'])([^"']+)\6)|(url\s*\(\s*(["'])?([^"')]+)(\9)\s*\))/g;function r(t,e){return t.replace(n,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=t[3]||t[7],r=t[10],o=(n||r).trim(),s=n?"@import ":"";return s+"url("+e(o)+")"}))}e.replaceIn=r,e.extractFrom=function(t){var e=[];return r(t,(function(t){return e.push(t),t})),e}},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"get",(function(){return Y})),i.d(n,"getRequestParameters",(function(){return K}));var r={};function o(t){return t.replace(/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function s(t){return t.nodeType===Node.ELEMENT_NODE}function a(t){return t.nodeType===Node.TEXT_NODE}function c(t){return function(t){return s(t)&&"link"===t.localName}(t)&&"stylesheet"===t.rel}function u(t){return s(t)&&"img"===t.localName}function p(t){return s(t)&&"style"===t.localName}function h(t){return s(t)&&"input"===t.localName}function l(t){return s(t)&&"script"===t.localName}function f(t){switch(t.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return!0;default:return!1}}i.r(r),i.d(r,"getRequestParameters",(function(){return Bi}));function d(t){for(var e=t,i=[e];null!==e.parentNode;)e=e.parentNode,i.push(e);return v(e)&&i.push("detached"),{ancestors:i,selectionRoot:e}}function v(t){return w.isValidElement(t)}function g(t){return Array.prototype.slice.call(t)}var y=[/\d{4}/,/^ember\d+$/];function m(t,e,i,n){var r=function(t){return o(t.localName.toLowerCase())}(t);if(function(t,e){var i=S(t);return i&&i.match(/^[\w-]+$/)&&E("data-cs-override-id",i,e)}(t,i))return{hasUniqueIdentifier:!0,elementSelector:r+'[data-cs-override-id="'+S(t)+'"]'};var s=function(t){var e=t.getAttribute("id");return e?o(e):e}(t);return function(t,e,i,n){return e&&!function(t){return null!==S(t)}(t)&&!function(t,e,i){return t.hasAttribute("data-cs-dynamic-id")||function(t,e){var i=!1;t&&e&&(i=e.test(t));return t&&(y.some((function(e){return e.test(t)}))||i)}(e,i)}(t,e,n)&&function(t,e){return t&&E("id",t,e)}(e,i)}(t,s,i,n)?{hasUniqueIdentifier:!0,elementSelector:r+"#"+s}:{hasUniqueIdentifier:!1,elementSelector:r+":eq("+function(t,e){return"detached"===t||9===t.nodeType?0:g(t.childNodes).filter((function(t){return 1===t.nodeType&&t.localName.toLowerCase()===e.localName.toLowerCase()})).indexOf(e)}(e,t)+")"}}function S(t){return t.getAttribute("data-cs-override-id")}function E(t,e,i){try{return 1===i.querySelectorAll("["+t+'="'+e+'"]').length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var w;function C(t,e,i,n){var r=t.shift();if(0===t.length)return b(r,i,n);var o=m(r,t[0],e,n),s=o.elementSelector,a=o.hasUniqueIdentifier;if(!i&&a)return""+b(t[t.length-1],i,n)+s;var c=C(t,e,i,n);return(c?c+">":"")+s}function b(t,e,i){if("detached"===t)return"|detached|";if(t.host){var n=d(t.host);return C(n.ancestors,n.selectionRoot,e,i)+"|shadow-root|"}return 11===t.nodeType?"|fragment|":""}function R(){return Math.floor(N.now()/1e3)}function T(){}function k(t,e){return 0===t.lastIndexOf(e,0)}function O(t,e){return-1!==t.indexOf(e,t.length-e.length)}!function(t){function e(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=e,t.getElementPath=function(n,r){var o=void 0===r?{}:r,s=o.fullPath,a=void 0!==s&&s,c=o.dynamicIdRegex,u=void 0===c?null:c,p=i(n);if(p===document)return"";if(!e(p))return t.INVALID_ELEMENT;var h=d(p);return C(h.ancestors,h.selectionRoot,a,u)},t.getElementPathAndFirstAnchorParent=function(n,r){var o=void 0===r?{}:r,a=o.fullPath,c=void 0!==a&&a,u=o.dynamicIdRegex,p=void 0===u?null:u,h=i(n);if(h===document)return{path:"",firstAnchorParent:null};if(!e(h))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var l=function(t){for(var e,i=t,n=[i],r=null;null!==i.parentNode;)null===r&&(s(e=i)&&"a"===e.localName)&&(r=i),n.push(i.parentNode),i=i.parentNode;return v(i)&&n.push("detached"),{firstAnchorParent:r,ancestors:n,selectionRoot:i}}(h),f=l.firstAnchorParent;return{path:C(l.ancestors,l.selectionRoot,c,p),firstAnchorParent:f}}}(w||(w={})),window.CSPathComputation=window.CSPathComputation||w;function P(t){return _()<t}function _(){return Math.floor(1e4*Math.random())/100}var A,I,N={now:function(){return"undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+Math.round(performance.now()):Date.now()}},L=function(){function t(t){this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||34164e6,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.autoInsightsEnabled=t.autoInsightsEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrorsEnabled=t.apiErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.buildRegexFromConfiguration(t.triggerSessionReplayRegex),this.metricRate=void 0===t.metricRate?0:t.metricRate,this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.buildRegexFromConfiguration(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.buildRegexFromConfiguration(t.replayRecordingMaskedUrlRegex),this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1}return t.prototype.getTrackerUri=function(){return this.protocol()+"://"+this.trackerDomain},t.prototype.getRecordingUri=function(){return this.protocol()+"://"+this.recordingDomain},t.prototype.getLoggerUri=function(){return this.protocol()+"://"+this.loggerDomain},t.prototype.protocol=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var e=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],n=t.slice(1);if("setOption"===i){var r=n[0],o=n[1];e.setOverridableField(r,o)}}))},t.prototype.setOverridableField=function(t,e){"trackerDomain"===t&&(this.trackerDomain=e),"recordingDomain"===t&&(this.recordingDomain=e),"loggerDomain"===t&&(this.loggerDomain=e),"minLogLevel"===t&&(this.minLogLevel=e),"useHttps"===t&&(this.useHttps=!!e)},t.prototype.buildRegexFromConfiguration=function(t){return t?new RegExp("^"+t+"$"):null},t.prototype.getRequestParameters=function(){return{pid:""+this.projectId}},t.prototype.updateDynamicFields=function(t,e){"emitDebugEvents"===t&&(this.emitDebugEvents=e),"minLogLevel"===t&&(this.minLogLevel=e)},t}();!function(t){var e,i={loadBundle:function(t){var s=t.source,a=t.data;if(r(a)){var p=function(){var e,i,r,o=n("{domain}/tag/tag.bundle.js?v={version}",a);e=o,i=function(){return s.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=e,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};e=a.token,u(i.loadBundle),o(t.origin)?p():function(t,e){var i=function(t){var e=document.createElement("iframe");return e.src=t,e.id="content-square-bridge",e.setAttribute("style","display: none !important; visibility: hidden !important;"),e}(n("{domain}/tag/bridge.html?v={version}#{token}",t)),r=function(t){t.source===i.contentWindow&&"TOKEN_VALID"===t.data&&(u(r),i.remove(),e())};c(r),document.head.appendChild(i)}(a,p)}}};function n(t,e){return t.replace("{version}",e.version).replace("{token}",e.token).replace("{domain}",e.domain)}function r(t){return t&&"csBundleInjection"===t.type&&o(t.domain)&&a(t.version)&&s(t.token)}function o(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function s(t){return/^[a-zA-Z0-9]+$/.test(t)}function a(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function u(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return e},t.isAuthorizedIncomingMessage=r,t.isAuthorizedDomain=o,t.isAuthorizedToken=s,t.isAuthorizedTagVersion=a,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(i.loadBundle)},t.listen=c,t.removeListener=u}(A||(A={})),function(t){var e,i=window.opener||window.parent,n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],r={ping:function(t){"ping"===t.data&&o(t.origin)&&(e=t.origin,c(r.ping),a(r.insertMessageScript),s("utils.js"+"?cb="+(new Date).getTime()))},insertMessageScript:u((function(t){var e=t.data;"string"==typeof e&&"ping"!==e&&(c(r.insertMessageScript),s(e))}))};function o(t){return n.some((function(e){return e.test(t)}))}function s(t,i){var n=document.createElement("script");n.type="text/javascript",n.async=!0;var r=e.replace(/^https?:/,"");n.src=r+"/tag/"+t,n.onload=i,n.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(n)}function a(t){window.addEventListener("message",t,!1)}function c(t){window.removeEventListener("message",t,!1)}function u(t){return function(i){i.origin===e&&t(i)}}t.getToken=function(){return A.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=o,t.waitForConnection=function(){a(r.ping),A.waitForBundleInjection()},t.listen=a,t.removeListener=c,t.secureListener=u,t.post=function(t){e&&i.postMessage(t,e)}}(I||(I={}));var x=window.CSFrameCommunication||I;var M,D=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.tryObjectAssign()},t.tryObjectAssign=function(){try{var t={},e=Object.assign(t,{a:1},{b:2,c:{d:4}}),i={a:1,b:2,c:{d:4}};return JSON.stringify(e)===JSON.stringify(i)&&JSON.stringify(t)===JSON.stringify(i)}catch(t){return!1}},t}(),q=function(){function t(t,e){this.configuration=t,this.cookieChecker=e}return t.prototype.canTrack=function(){return this.isBrowsingContextSupported()&&this.canTrackProject()},t.prototype.canTrackProject=function(){return this.configuration.isProjectActive()&&this.matchHostnames()},t.prototype.matchHostnames=function(){return this.configuration.hostnames.some((function(t){return window.location.hostname.indexOf(t)>=0}))},t.prototype.isBrowsingContextSupported=function(){return this.cookieChecker.areCookiesEnabled()&&!this.isDocPrerendered()&&this.isBrowserSupported()&&D.check()},t.prototype.isDocPrerendered=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.isBrowserSupported=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&function(){var t="CSLocalStorageTest";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}()&&"JSON"in window&&"parse"in window.JSON&&"stringify"in window.JSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in Array.prototype&&"forEach"in Array.prototype&&"querySelectorAll"in document&&"now"in Date&&"keys"in Object&&"performance"in window},t}(),U=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,V=/[a-zA-Z0-9+_-](?:@|%40)/,z=function(){function t(){}return t.prototype.anonymize=function(t){return"string"==typeof t&&V.test(t)?t.replace(U,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeFields=function(t,e){var i=this;return e.forEach((function(e){t[e]=i.anonymize(t[e])})),t},t}();!function(t){t.toQuery=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}}(M||(M={}));var j,H,B=function(){return(B=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},F=function(){function t(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.requestParametersProviders=t},t.prototype.before=function(t){this.beforeRequestCallbacks.push(t)},t.prototype.after=function(t){this.afterRequestCallbacks.push(t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?this.requestParametersProviders.map((function(t){return t.getRequestParameters()})).reduce((function(t,e){return B(B({},t),e)})):{}},t}(),G=(j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),W=function(t){function e(e,i){return t.call(this,e,i)||this}return G(e,t),e.prototype.send=function(){this.beforeRequestCallbacks.forEach((function(t){return t()}));var t=this.retrieveParameters();this.addCacheBusting(t);var e=M.toQuery(t);this.generatePixel(e),this.afterRequestCallbacks.forEach((function(t){return t()}))},e.prototype.generatePixel=function(t){var e=new window.Image(1,1);e.onload=T,e.onerror=T,e.src=this.domainUri+(this.path?"/"+this.path:"")+"?"+t},e.prototype.addCacheBusting=function(t){t.r=(""+Math.random()).slice(2,8)},e}(F),X=function(){function t(t,e){this.projectConfiguration=t,this.basicLogRequestParameter=e}return t.prototype.init=function(){this.request=new W(this.projectConfiguration.getLoggerUri()),this.request.setRequestParametersProviders(this,this.basicLogRequestParameter)},t.prototype.send=function(t){this.log=t,this.request.send()},t.prototype.getRequestParameters=function(){return{a:this.log.app,l:this.log.level,m:this.log.message,s:this.log.stacktrace}},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(H||(H={}));function Y(){return"9.33.0"}function K(){return{v:"9.33.0"}}var J,Q=function(){return(Q=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Z=function(){function t(t,e){this.configuration=t,this.pii=e}return t.prototype.getRequestParameters=function(){return Q(Q({d:""+N.now(),p:this.pii.anonymize(window.location.href),u:navigator.userAgent},this.configuration.getRequestParameters()),{v:"9.33.0"})},t}();!function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(J||(J={}));var $,tt=function(){function t(){}return t.init=function(t,e,i){var n;this.minLogLevel=J[t.minLogLevel||H.warn];var r=t.validationRate>=0?t.validationRate:10;this.isLoggingActive=P(r),this.pii=e,this.request=i||new X(t,new Z(t,this.pii)),this.logTrack=((n={})[H.debug]=[],n[H.warn]=[],n[H.error]=[],n[H.critical]=[],n),this.snippetLogCounter={},this.request.init(),this.visitorService=void 0,this.sessionService=void 0},t.setContext=function(t,e){this.visitorService=t,this.sessionService=e},t.debug=function(t,e){void 0===e&&(e=""),this.send(t,e,H.debug)},t.warn=function(t,e){void 0===e&&(e=""),this.send(t,e,H.warn)},t.error=function(t,e){void 0===e&&(e=""),this.send(t,e,H.error)},t.critical=function(t,e){void 0===e&&(e=""),this.send(t,e,H.critical)},t.tryToExecute=function(t,e){var i=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){try{i.send(e,t,H.error)}catch(t){}}}},t.send=function(t,e,i){if(void 0===e&&(e=""),void 0===i&&(i=H.warn),this.isLoggingAllowed(i,e)){this.logTrack[i].push(e||"");var n={message:this.getMessage(t,e),stacktrace:this.getStacktrace(t),app:"uxa",level:i};this.request.send(n)}},t.getMessage=function(t,e){var i=t instanceof Error?this.pii.anonymize(t.message||t.toString()):t;return e&&(i+=" ErrorCode: "+e),i},t.getStacktrace=function(t){return t instanceof Error?(t.stack||"No stacktrace")+" "+this.getContext():this.getContext()},t.isLoggingAllowed=function(e,i){if(!this.isLoggingActive||J[e]<this.minLogLevel)return!1;if(0===(null==i?void 0:i.indexOf("snippet-",0)))return t.isLoggingAllowedForSnippets(i);var n=this.logTrack[e];return!(n.length>=5)&&(!i||!n.some((function(t){return t===i})))},t.isLoggingAllowedForSnippets=function(t){return t in this.snippetLogCounter?!(this.snippetLogCounter[t]>=5)&&(this.snippetLogCounter[t]+=1,!0):(this.snippetLogCounter[t]=1,!0)},t.getContext=function(){if(!this.visitorService||!this.visitorService.doesVisitorExist())return"No context";var t=this.visitorService.getVisitor(),e=this.sessionService&&this.sessionService.getSession(),i={userId:t.id,sessionNumber:t.visitsCount,pageNumber:e&&e.pageNumber};return JSON.stringify(i)},t.pii=new z,t.minLogLevel=J[H.warn],t.isLoggingActive=!1,t}(),et=function(t){return function(e,i,n){var r=i.toString(),o=t||(e.constructor&&e.constructor.name)+"."+r,s=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tt.tryToExecute(o,s.bind(this)).apply(void 0,t)}}};!function(t){function e(t){return t.get("_cs_cvars")}t.get=function(t){var i=e(t);return null!==i?window.JSON.parse(i):null},t.getRaw=e,t.setRaw=function(t,e,i){e.set("_cs_cvars",t),i.setCookie("_cs_cvars",t)},t.remove=function(t,e){t.delete("_cs_cvars"),e.removeCookie("_cs_cvars")},t.isValidCustomVarString=function(t){return"string"==typeof t}}($||($={}));var it,nt=function(){function t(t,e,i,n,r,o){this.visitorService=t,this.sessionService=e,this.exclusionService=i,this.configuration=n,this.cookieService=r,this.crossDomainSingleIframeService=o}return t.prototype.get=function(){return{exclusion:this.exclusionService.getAppliedTrackingDraw(),visitor:this.visitorService.getVisitor(),session:this.sessionService.getSession(),cvars:$.getRaw(this.cookieService)}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.exclusionService.exclude(this.configuration),this.visitorService.removeCurrentVisitor(),this.sessionService.removeCurrentSession(),$.remove(this.cookieService,this.crossDomainSingleIframeService)},t.prototype.include=function(t){this.exclusionService.removeExclusion(),this.visitorService.setVisitor(t.visitor),t.session?this.sessionService.setSession(t.session):this.sessionService.removeCurrentSession(),t.cvars?$.setRaw(t.cvars,this.cookieService,this.crossDomainSingleIframeService):$.remove(this.cookieService,this.crossDomainSingleIframeService)},t}(),rt=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/;!function(t){function e(t){return[t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.sameSite,t.secured].join(".")}function i(t){var e=t.split("."),i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],p=e[8];return{id:i,creationTimestamp:Number(n),visitsCount:Number(r),hitTimestamp:Number(o),lastVisitTimestamp:Number(s),appliedTrackingDraw:Number(a),expires:Number(c),sameSite:u||void 0,secured:p?Number(p):void 0}}t.get=function(t){var e=t.get("_cs_id");return e?i(e):null},t.set=function(t,i,n){var r=new Date(t.expires),o=e(t);i.set("_cs_id",o,r),n.setCookie("_cs_id",o,r)},t.remove=function(t,e,i){e.delete("_cs_id",t),i.removeCookie("_cs_id")},t.toString=e,t.fromString=i,t.isValidVisitorString=function(t){return rt.test(t)}}(it||(it={}));var ot,st=/^\d+\.[0123]$/,at=function(){function t(t,e){this.cookieService=t,this.crossDomainSingleIframeService=e}return t.prototype.get=function(e){var i=this.getRawSession(e);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(t){return t?this.cookieService.get("_cs_s"):this.cookieService.getWithCache("_cs_s")},t.prototype.set=function(t,e){void 0===e&&(e=18e5);var i=this.toString(t);this.cookieService.setWithCache("_cs_s",i,e),this.crossDomainSingleIframeService.setCookie("_cs_s",i,e)},t.prototype.remove=function(t){this.cookieService.delete("_cs_s",t),this.crossDomainSingleIframeService.removeCookie("_cs_s")},t.prototype.isValid=function(e){return null!==e&&t.isValidSessionString(e)},t.prototype.toString=function(t){return[t.pageNumber,t.recordingState].join(".")},t.fromString=function(t){var e=t.split("."),i=e[0];return{recordingState:e[1],pageNumber:parseInt(i,10)}},t.isValidSessionString=function(t){return st.test(t)},t}();(ot||(ot={})).fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?it.fromString(t._cs_id):null,session:t._cs_s?at.fromString(t._cs_s):null,cvars:t._cs_cvars||null}};var ct,ut=/^[0-9]+$/,pt=function(){function t(t,e,i){this.location=t,this.cookieService=e,this.crossDomainSingleIframeService=i}return t.prototype.exclude=function(t){this.cookieService.set("_cs_ex",String(t.lastTrackingDraw),2592e6),this.crossDomainSingleIframeService.setCookie("_cs_ex",""+t.lastTrackingDraw,2592e6)},t.prototype.removeExclusion=function(){this.cookieService.delete("_cs_ex"),this.crossDomainSingleIframeService.removeCookie("_cs_ex")},t.prototype.isExcluded=function(){return this.hasExclusionCookie()||this.hasExclusionInURL()},t.prototype.hasExclusionCookie=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return Number(this.cookieService.get("_cs_ex"))},t.prototype.hasExclusionInURL=function(){return this.location.href.indexOf("_cs_ex")>0},t.isValidExclusionString=function(t){return ut.test(t)},t}();!function(t){function e(t){var e=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return Object.keys(t).every((function(t){return e.indexOf(t)>=0}))}t.isRawDomainState=e,t.isValid=function(t){return!!e(t)&&((!t._cs_id||it.isValidVisitorString(t._cs_id))&&(!t._cs_s||at.isValidSessionString(t._cs_s))&&(!t._cs_ex||pt.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||$.isValidCustomVarString(t._cs_cvars)))}}(ct||(ct={}));var ht,lt=function(){function t(t,e){this.xdframeOpener=t,this.location=e}return t.prototype.retrieve=function(e,i){var n=this;this.callback=i,this.retrievedStates=[],this.xdframeOrigins=e.filter((function(t){return n.isNotCurrentHostname(t)})).map(t.getXdframeOrigin),this.xdframeOpener.onMessage((function(t){n.handleXdframeMessage(t)})),this.xdframeOpener.onTimeout((function(){n.handleTimeout()})),this.xdframeOpener.start(),this.xdframeOrigins.map(t.getXdframeUrl).forEach((function(t){return n.xdframeOpener.open(t)}))},t.prototype.handleXdframeMessage=function(t){if(this.isXdframeMessage(t)){var e=t.data;if(!ct.isValid(e))throw this.xdframeOpener.stop(),"Invalid domain state: "+JSON.stringify(t.data)+" from "+t.origin;this.retrievedStates.push(e)}this.allMessagesAreIn()&&(this.xdframeOpener.stop(),this.callback(this.retrievedStates.map(ot.fromRaw)))},t.prototype.handleTimeout=function(){tt.warn("xdframe: all messages not received")},t.prototype.isXdframeMessage=function(t){return this.xdframeOrigins.indexOf(t.origin)>-1},t.prototype.allMessagesAreIn=function(){return this.retrievedStates.length===this.xdframeOrigins.length},t.prototype.isNotCurrentHostname=function(t){return!O(this.location.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd."+t},t.getXdframeUrl=function(t){return t+"/xdframe-1.0.0.html"},t}(),ft=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},dt=function(){function t(){var t=this;this.ALL_MESSAGES_RECEIVED_TIMEOUT=3e3,this.scopedHandleMessage=function(e){t.handleMessage(e)}}return t.prototype.onMessage=function(t){this.onMessageCallback=t},t.prototype.onTimeout=function(t){this.onTimeoutCallback=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.scopedHandleMessage),this.timeoutId=window.setTimeout((function(){t.onTimeoutCallback()}),this.ALL_MESSAGES_RECEIVED_TIMEOUT)},t.prototype.open=function(t){var e=document.createElement("iframe");return e.src=t,e.style.display="none",document.body.appendChild(e),e},t.prototype.stop=function(){window.removeEventListener("message",this.scopedHandleMessage),window.clearTimeout(this.timeoutId),this.onMessageCallback=T,this.onTimeoutCallback=T},t.prototype.handleMessage=function(t){this.onMessageCallback(t)},ft([et("XdframeMessage")],t.prototype,"handleMessage",null),t}(),vt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gt=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},yt=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.compressor=n,r.afterRequestDataRetrievedCallbacks=[],r.requestHeaders=[],r}return vt(e,t),e.prototype.setRequestPayloadProvider=function(t){this.requestPayloadProvider=t},e.prototype.setRequestHeader=function(t){this.requestHeaders.push(t)},e.prototype.afterProvidersCalled=function(t){this.afterRequestDataRetrievedCallbacks.push(t)},e.prototype.send=function(){var t=this;this.beforeRequestCallbacks.forEach((function(t){return t()}));var e=this.retrieveParameters(),i=M.toQuery(e),n=this.retrievePayload();this.afterRequestDataRetrievedCallbacks.forEach((function(t){return t()})),this.compressor?this.compressor.compress(n,(function(e){t.doSend(i,e)})):this.doSend(i,n)},e.prototype.retrievePayload=function(){return this.requestPayloadProvider?this.requestPayloadProvider.getRequestPayload():""},e.prototype.doSend=function(t,e){this.sendXMLHttpRequest(t,e),this.afterRequestCallbacks.forEach((function(t){return t()}))},e.prototype.sendXMLHttpRequest=function(t,e){if(null!==window.XMLHttpRequest){var i=new XMLHttpRequest;i.open("POST",this.domainUri+"/"+this.path+"?"+t,!0);for(var n=0,r=this.requestHeaders;n<r.length;n++){var o=r[n];i.setRequestHeader(o.name,o.value)}i.onreadystatechange=T,i.send(e)}},gt([et("POST request")],e.prototype,"doSend",null),e}(F);!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.MOUSE_MOVE=7]="MOUSE_MOVE",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.MOUSE_DOWN=24]="MOUSE_DOWN",t[t.MOUSE_UP=25]="MOUSE_UP",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT"}(ht||(ht={}));function mt(t,e){void 0===e&&(e=!0),t.boundElement.addEventListener(t.type,t.listener,e)}function St(t,e){void 0===e&&(e=!0),t.boundElement.removeEventListener(t.type,t.listener,e)}var Et=function(){return(Et=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},wt=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ct=function(){function t(e,i,n){var r=this;this.selector=e,this.nodeIdentifier=i,this.sensitiveContent=n,this.documents=[],this.onEventCallbacks=[],this.eventHandlers=[{type:"change",listener:this.selector.on(t.whiteListedCheckableInputsSelector,(function(t){return r.inputCheckableListener(t.target)}))},{type:"change",listener:this.selector.on("select",(function(t){return r.inputSelectListener(t.target)}))},{type:"keyup",listener:this.selector.on(t.whiteListedTextInputSelector,(function(t){return r.inputTextListener(t.target)}))},{type:"scroll",listener:function(t){return r.scrollListener(t.target)}},{type:"mouseover",listener:function(t){return r.mouseOverListener(t)}},{type:"click",listener:function(t){return r.clickListener(t)}},{type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{type:"mouseup",listener:function(t){return r.mouseUpListener(t)}}],this.initSubscribers()}return t.prototype.initSubscribers=function(){var t=this;this.nodeIdentifier.onIdentifierAdded((function(e){f(e)&&t.bindHandlers(e)})),this.nodeIdentifier.onIdentifierRemoved((function(e){f(e)&&t.unbindHandlers(e)}))},t.prototype.onEvent=function(t){this.onEventCallbacks.push((function(e){e.date=N.now(),t(e)}))},t.prototype.triggerCallbacks=function(t){this.onEventCallbacks.forEach((function(e){return e(t)}))},t.prototype.start=function(){this.triggerInitialEvents()},t.prototype.stop=function(){this.unbindAllHandlers()},t.prototype.bindHandlers=function(t){-1===this.documents.indexOf(t)&&(this.documents.push(t),this.eventHandlers.forEach((function(e){return mt(Et({boundElement:t},e))})))},t.prototype.unbindHandlers=function(t){this.documents=this.documents.filter((function(e){return e!==t})),this.eventHandlers.forEach((function(e){return St(Et({boundElement:t},e))}))},t.prototype.unbindAllHandlers=function(){var t=this;this.documents.forEach((function(e){return t.unbindHandlers(e)}))},t.prototype.triggerInitialEvents=function(){this.initialTextInputListener(),this.initialScrollListener(),this.initialSelectListener(),this.initialCheckableListener()},t.prototype.initialTextInputListener=function(){for(var e=document.querySelectorAll(t.whiteListedTextInputSelector),i=0;i<e.length;i+=1){var n=e.item(i);n.value.length>0&&this.inputTextListener(n)}},t.prototype.initialScrollListener=function(){for(var t=document.getElementsByTagName("*"),e=0;e<t.length;e+=1){var i=t[e],n=this.getScrollPosition(i),r=n.top,o=n.left;0===r&&0===o||this.scrollListener(i)}},t.prototype.initialSelectListener=function(){for(var t=document.getElementsByTagName("select"),e=0;e<t.length;e+=1)this.inputSelectListener(t[e])},t.prototype.initialCheckableListener=function(){for(var e=document.querySelectorAll(t.whiteListedCheckableInputsSelector),i=0;i<e.length;i+=1)this.inputCheckableListener(e[i])},t.prototype.getScrollPosition=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t,(function(i){if(!e.sensitiveContent.isSensitiveElementNode(t)){var n=e.getScrollPosition(t);e.triggerCallbacks({type:ht.SCROLL,args:[i,n.left,n.top]})}}))},t.prototype.mouseOverListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t.target,(function(t){e.triggerCallbacks({type:ht.MOUSE_OVER,args:[t]})}))},t.prototype.clickListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t.target,(function(t){e.triggerCallbacks({type:ht.CLICK,args:[t]})}))},t.prototype.mouseDownListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t.target,(function(i){e.triggerCallbacks({type:ht.MOUSE_DOWN,args:[i,t.button]})}))},t.prototype.mouseUpListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t.target,(function(i){e.triggerCallbacks({type:ht.MOUSE_UP,args:[i,t.button]})}))},t.prototype.inputCheckableListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t,(function(i){e.sensitiveContent.isSensitiveElementNode(t)||e.triggerCallbacks({type:ht.INPUT_CHECKABLE,args:[i,t.checked]})}))},t.prototype.inputSelectListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t,(function(i){e.sensitiveContent.isSensitiveElementNode(t)||e.triggerCallbacks({type:ht.INPUT_SELECT,args:[i,t.selectedIndex]})}))},t.prototype.inputTextListener=function(t){var e=this;this.nodeIdentifier.ifIdentified(t,(function(i){e.sensitiveContent.isSensitiveElementNode(t)||e.triggerCallbacks({type:ht.INPUT_TEXT,args:[i,t.value.replace(/\S/g,"â€¢")]})}))},t.whiteListedTextInputSelector=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]'].join(","),t.whiteListedCheckableInputsSelector=['input[type="checkbox"]','input[type="radio"]'].join(","),wt([et("scroll")],t.prototype,"scrollListener",null),wt([et("mouseOver")],t.prototype,"mouseOverListener",null),wt([et("click")],t.prototype,"clickListener",null),wt([et("mousedown")],t.prototype,"mouseDownListener",null),wt([et("mouseup")],t.prototype,"mouseUpListener",null),wt([et("checkable")],t.prototype,"inputCheckableListener",null),wt([et("select")],t.prototype,"inputSelectListener",null),wt([et("text")],t.prototype,"inputTextListener",null),t}(),bt=function(){function t(t,e,i){var n=this;this.mutationSerializer=t,this.mutationObserver=e,this.staticResourceUrlTracker=i,this.mutationObserver.onCharacterDataMutation((function(t){return n.characterDataMutation(t)})),this.mutationObserver.onAttributesMutation((function(t){return n.attributesMutation(t)})),this.mutationObserver.onChildListMutation((function(t){return n.childListMutation(t)})),this.mutationObserver.onAttachShadowMutation((function(t){return n.attachShadowEvent(t)}))}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){this.mutationObserver.start(),this.recordInitialDom()},t.prototype.stop=function(){this.mutationObserver.stop()},t.prototype.recordInitialDom=function(){var t=this.mutationSerializer.serializeDocument(document);this.onEventCallback({args:t,date:N.now(),type:ht.INITIAL_DOM})},t.prototype.attachShadowEvent=function(t){var e=this.mutationSerializer.serializeAttachShadowEvent(t);e&&this.onEventCallback({args:e,date:t.date,type:ht.ATTACH_SHADOW})},t.prototype.attributesMutation=function(t){var e=this.mutationSerializer.serializeMutationAttribute(t);e&&(this.onEventCallback({args:e,date:t.date,type:ht.MUTATION_ATTRIBUTE}),this.staticResourceUrlTracker.scanAttribute(t.target,t.attributeName))},t.prototype.characterDataMutation=function(t){var e=this.mutationSerializer.serializeMutationCharacterData(t);e&&(this.onEventCallback({args:e,date:t.date,type:ht.MUTATION_CHARACTER_DATA}),this.staticResourceUrlTracker.scanText(t.target))},t.prototype.childListMutation=function(t){var e=this,i=this.mutationSerializer.serializeMutationChildList(t);if(i){var n=i.removedNodes,r=i.addedNodes;n.forEach((function(i){e.onEventCallback({args:i,date:t.date,type:ht.MUTATION_REMOVE})})),r.forEach((function(i){e.onEventCallback({args:i,date:t.date,type:ht.MUTATION_INSERT})}))}},t}(),Rt=function(){function t(t){this.storageCharsUsed=0,this.maxStoredChars=0,this.maxStoredChars=t/2}return t.prototype.add=function(t){this.storageCharsUsed+=t.length},t.prototype.isThresholdReached=function(){return this.storageCharsUsed>this.maxStoredChars},t.prototype.reset=function(){this.storageCharsUsed=0},t}(),Tt=function(){function t(t,e,i){void 0===t&&(t=[]),void 0===e&&(e={}),void 0===i&&(i=512e3),this.events=t,this.requestParameters=e,this.sizeCounter=new Rt(i)}return t.prototype.addEvent=function(t){this.sizeCounter.add(JSON.stringify(t)),this.events.push(t)},t.prototype.eventsCount=function(){return this.events.length},t.prototype.clearEvents=function(){this.sizeCounter.reset(),this.events=[]},t.prototype.isFull=function(){return this.sizeCounter.isThresholdReached()||this.eventsCount()>=100},t.prototype.setRequestParametersFromProvider=function(t){var e=t.getRequestParameters();for(var i in e)e.hasOwnProperty(i)&&(this.requestParameters[i]=e[i])},t.prototype.getEvents=function(){return this.events},t.prototype.getRequestPayload=function(){return JSON.stringify(this.events)},t.prototype.getRequestParameters=function(){return this.requestParameters},t}(),kt=function(){function t(){this.index=1}return t.prototype.increment=function(){this.index+=1},t.prototype.reset=function(){this.index=1},t.prototype.getRequestParameters=function(){return{ri:""+this.index}},t}(),Ot=_t.toString(),Pt=_t();function _t(){var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var i,n,r,o,s,a,c,u="",p=0;for(e=t.compress(e);p<2*e.length;)p%2==0?(i=e.charCodeAt(p/2)>>8,n=255&e.charCodeAt(p/2),r=p/2+1<e.length?e.charCodeAt(p/2+1)>>8:NaN):(i=255&e.charCodeAt((p-1)/2),(p+1)/2<e.length?(n=e.charCodeAt((p+1)/2)>>8,r=255&e.charCodeAt((p+1)/2)):n=r=NaN),p+=3,o=i>>2,s=(3&i)<<4|n>>4,a=(15&n)<<2|r>>6,c=63&r,isNaN(n)?a=c=64:isNaN(r)&&(c=64),u=u+t._keyStr.charAt(o)+t._keyStr.charAt(s)+t._keyStr.charAt(a)+t._keyStr.charAt(c);return u},decompressFromBase64:function(e){if(null==e)return"";var i,n,r,o,s,a,c,u="",p=0,h=0,l=t._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)n=t._keyStr.indexOf(e.charAt(h++))<<2|(s=t._keyStr.indexOf(e.charAt(h++)))>>4,r=(15&s)<<4|(a=t._keyStr.indexOf(e.charAt(h++)))>>2,o=(3&a)<<6|(c=t._keyStr.indexOf(e.charAt(h++))),p%2==0?(i=n<<8,64!=a&&(u+=l(i|r)),64!=c&&(i=o<<8)):(u+=l(i|n),64!=a&&(i=r<<8),64!=c&&(u+=l(i|o))),p+=3;return t.decompress(u)},compressToUTF16:function(e){if(null==e)return"";var i,n,r,o="",s=0,a=t._f;for(e=t.compress(e),i=0;i<e.length;i++)switch(n=e.charCodeAt(i),s++){case 0:o+=a(32+(n>>1)),r=(1&n)<<14;break;case 1:o+=a(r+(n>>2)+32),r=(3&n)<<13;break;case 2:o+=a(r+(n>>3)+32),r=(7&n)<<12;break;case 3:o+=a(r+(n>>4)+32),r=(15&n)<<11;break;case 4:o+=a(r+(n>>5)+32),r=(31&n)<<10;break;case 5:o+=a(r+(n>>6)+32),r=(63&n)<<9;break;case 6:o+=a(r+(n>>7)+32),r=(127&n)<<8;break;case 7:o+=a(r+(n>>8)+32),r=(255&n)<<7;break;case 8:o+=a(r+(n>>9)+32),r=(511&n)<<6;break;case 9:o+=a(r+(n>>10)+32),r=(1023&n)<<5;break;case 10:o+=a(r+(n>>11)+32),r=(2047&n)<<4;break;case 11:o+=a(r+(n>>12)+32),r=(4095&n)<<3;break;case 12:o+=a(r+(n>>13)+32),r=(8191&n)<<2;break;case 13:o+=a(r+(n>>14)+32),r=(16383&n)<<1;break;case 14:o+=a(r+(n>>15)+32,32+(32767&n)),s=0}return o+a(r+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var i,n,r="",o=0,s=0,a=t._f;s<e.length;){switch(n=e.charCodeAt(s)-32,o++){case 0:i=n<<1;break;case 1:r+=a(i|n>>14),i=(16383&n)<<2;break;case 2:r+=a(i|n>>13),i=(8191&n)<<3;break;case 3:r+=a(i|n>>12),i=(4095&n)<<4;break;case 4:r+=a(i|n>>11),i=(2047&n)<<5;break;case 5:r+=a(i|n>>10),i=(1023&n)<<6;break;case 6:r+=a(i|n>>9),i=(511&n)<<7;break;case 7:r+=a(i|n>>8),i=(255&n)<<8;break;case 8:r+=a(i|n>>7),i=(127&n)<<9;break;case 9:r+=a(i|n>>6),i=(63&n)<<10;break;case 10:r+=a(i|n>>5),i=(31&n)<<11;break;case 11:r+=a(i|n>>4),i=(15&n)<<12;break;case 12:r+=a(i|n>>3),i=(7&n)<<13;break;case 13:r+=a(i|n>>2),i=(3&n)<<14;break;case 14:r+=a(i|n>>1),i=(1&n)<<15;break;case 15:r+=a(i|n),o=0}s++}return t.decompress(r)},compressToUint8Array:function(e){for(var i=t.compress(e),n=new Uint8Array(2*i.length),r=0,o=i.length;r<o;r++){var s=i.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(e){if(null==e)return t.decompress(e);for(var i=new Array(e.length/2),n=0,r=i.length;n<r;n++)i[n]=256*e[2*n]+e[2*n+1];return t.decompress(String.fromCharCode.apply(null,i))},compressToEncodedURIComponent:function(e){return t.compressToBase64(e).replace("=","$").replace("/","-")},decompressFromEncodedURIComponent:function(e){return e&&(e=e.replace("$","=").replace("-","/")),t.decompressFromBase64(e)},compress:function(e){if(null==e)return"";var i,n,r,o={},s={},a="",c="",u="",p=2,h=3,l=2,f="",d=0,v=0,g=t._f;for(r=0;r<e.length;r+=1)if(a=e.charAt(r),Object.prototype.hasOwnProperty.call(o,a)||(o[a]=h++,s[a]=!0),c=u+a,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(i=0;i<l;i++)d<<=1,15==v?(v=0,f+=g(d),d=0):v++;for(n=u.charCodeAt(0),i=0;i<8;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1}else{for(n=1,i=0;i<l;i++)d=d<<1|n,15==v?(v=0,f+=g(d),d=0):v++,n=0;for(n=u.charCodeAt(0),i=0;i<16;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1}0==--p&&(p=Math.pow(2,l),l++),delete s[u]}else for(n=o[u],i=0;i<l;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1;0==--p&&(p=Math.pow(2,l),l++),o[c]=h++,u=String(a)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(i=0;i<l;i++)d<<=1,15==v?(v=0,f+=g(d),d=0):v++;for(n=u.charCodeAt(0),i=0;i<8;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1}else{for(n=1,i=0;i<l;i++)d=d<<1|n,15==v?(v=0,f+=g(d),d=0):v++,n=0;for(n=u.charCodeAt(0),i=0;i<16;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1}0==--p&&(p=Math.pow(2,l),l++),delete s[u]}else for(n=o[u],i=0;i<l;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1;0==--p&&(p=Math.pow(2,l),l++)}for(n=2,i=0;i<l;i++)d=d<<1|1&n,15==v?(v=0,f+=g(d),d=0):v++,n>>=1;for(;;){if(d<<=1,15==v){f+=g(d);break}v++}return f},decompress:function(e){if(null==e)return"";if(""==e)return null;var i,n,r,o,s,a,c,u=[],p=4,h=4,l=3,f="",d="",v=t._f,g={string:e,val:e.charCodeAt(0),position:32768,index:1};for(i=0;i<3;i+=1)u[i]=i;for(r=0,s=Math.pow(2,2),a=1;a!=s;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),r|=(o>0?1:0)*a,a<<=1;switch(r){case 0:for(r=0,s=Math.pow(2,8),a=1;a!=s;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),r|=(o>0?1:0)*a,a<<=1;c=v(r);break;case 1:for(r=0,s=Math.pow(2,16),a=1;a!=s;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),r|=(o>0?1:0)*a,a<<=1;c=v(r);break;case 2:return""}for(u[3]=c,n=d=c;;){if(g.index>g.string.length)return"";for(r=0,s=Math.pow(2,l),a=1;a!=s;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),r|=(o>0?1:0)*a,a<<=1;switch(c=r){case 0:for(r=0,s=Math.pow(2,8),a=1;a!=s;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),r|=(o>0?1:0)*a,a<<=1;u[h++]=v(r),c=h-1,p--;break;case 1:for(r=0,s=Math.pow(2,16),a=1;a!=s;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),r|=(o>0?1:0)*a,a<<=1;u[h++]=v(r),c=h-1,p--;break;case 2:return d}if(0==p&&(p=Math.pow(2,l),l++),u[c])f=u[c];else{if(c!==h)return null;f=n+n.charAt(0)}d+=f,u[h++]=n+f.charAt(0),n=f,0==--p&&(p=Math.pow(2,l),l++)}}};return t}var At=function(){function t(t){this.onError=t,this.worker=this.tryCreateCompressionWorker(),this.callbacks={},this.callbackId=0}return t.prototype.isSupported=function(){return null!==this.worker},t.prototype.compress=function(t,e){if(this.isSupported()){var i=this.getNewCallbackId();this.callbacks[i]=e,this.worker.postMessage([t,i])}},t.prototype.compressSync=function(t){return Pt.compressToBase64(t)},t.prototype.terminateWorker=function(){null!==this.worker&&this.worker.terminate()},t.prototype.tryCreateCompressionWorker=function(){try{var t=this.compressionScript.toString().replace("GET_LZ_STRING_SOURCE",Ot);return this.createWorker("("+t+")();")}catch(t){return null}},t.prototype.createWorker=function(t){var e=this,i=window.URL||window.webkitURL,n=window.Blob,r=window.Worker;if(!i||!n||!r)return null;var o=new n([t],{type:"application/javascript"}),s=new r(i.createObjectURL(o));return s.onerror=function(t){return e.handleWorkerError(t)},s.onmessage=function(t){return e.handleWorkerMessage(t)},s},t.prototype.handleWorkerError=function(t){var e="WorkerError: "+(t.message?t.message:"No message");return this.onError(e)},t.prototype.handleWorkerMessage=function(t){var e=t.data,i=e[0],n=e[1];this.callbacks[i](n),delete this.callbacks[i]},t.prototype.compressionScript=function(){var t=GET_LZ_STRING_SOURCE();self.addEventListener("message",(function(e){var i=e.data,n=i[0],r=i[1];self.postMessage([r,t.compressToBase64(n)])}))},t.prototype.getNewCallbackId=function(){return this.callbackId+=1},t}(),It=function(){function t(){}return t.prototype.emit=function(e,i){var n=t.prefix+"."+e,r=t.createEvent(n,{detail:i});null!==r&&document.dispatchEvent(r)},t.createEvent=function(t,e){if(void 0===e&&(e={}),"function"==typeof CustomEvent)return new CustomEvent(t,e);var i=this.tryToCreateCustomEvent();if(null===i)return null;var n=e.bubbles,r=void 0!==n&&n,o=e.cancelable,s=void 0!==o&&o,a=e.detail;return i.initCustomEvent(t,r,s,a),i},t.tryToCreateCustomEvent=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.prefix="cs.tracking",t}(),Nt=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.onStart())},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),Lt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xt=function(){return(xt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Mt=function(t){function e(e,i,n,r,o,s,a,c,u,p,h,l,f){var d=t.call(this)||this;return d.configuration=e,d.recordingRequest=i,d.recordingBatch=n,d.requestParameters=r,d.requestIndex=o,d.styleSheetRuleTracker=s,d.recordingMutationsTracker=a,d.recordingPageEventsTracker=c,d.recordingBrowserEventsTracker=u,d.sessionRenewer=p,d.staticResourceUrlTracker=h,d.recordingPerformanceTimingsTracker=l,d.javaScriptErrorsTracker=f,d.javaScriptErrorsCount=0,d.eventEmitter=new It,d}return Lt(e,t),e.prototype.init=function(){this.bindRecordingRequest(),this.bindTrackers()},e.prototype.bindRecordingRequest=function(){var t=this;this.recordingRequest.setRequestPayloadProvider(this.recordingBatch),this.recordingRequest.setRequestParametersProviders(this.recordingBatch),this.recordingRequest.afterProvidersCalled((function(){t.recordingBatch.clearEvents(),t.requestIndex.increment(),t.recordingBatch.setRequestParametersFromProvider(t.requestParameters)}))},e.prototype.bindTrackers=function(){var t=this,i=function(e){return t.processEvent(e)};this.styleSheetRuleTracker.onEvent(i),this.recordingMutationsTracker.onEvent(i),this.recordingBrowserEventsTracker.onEvent(i),this.recordingPageEventsTracker.onEvent(i),this.staticResourceUrlTracker.onEvent(i),this.recordingPerformanceTimingsTracker.onEvent(i),this.javaScriptErrorsTracker.onEvent((function(n){t.javaScriptErrorsCount<e.MAX_JAVASCRIPT_ERROR_COUNT&&(i({type:ht.JAVASCRIPT_ERROR,date:N.now(),args:[n]}),t.javaScriptErrorsCount=t.javaScriptErrorsCount+1)}))},e.prototype.processEvent=function(t){this.sessionRenewer.isSessionValid()&&(this.recordingBatch.addEvent(t),this.recordingBatch.isFull()&&this.pushEvents(),this.configuration.emitDebugEvents&&this.eventEmitter.emit("recordingEvent",xt(xt({},t),{typeName:ht[t.type]})))},e.prototype.onStart=function(){this.recordingBatch.setRequestParametersFromProvider(this.requestParameters),this.recordingPerformanceTimingsTracker.start(),this.styleSheetRuleTracker.start(),this.recordingMutationsTracker.start(),this.recordingBrowserEventsTracker.start(),this.recordingPageEventsTracker.start(),this.configuration.jsErrorsEnabled&&this.javaScriptErrorsTracker.start(),this.configuration.emitDebugEvents&&this.eventEmitter.emit("replayRecordingStarted")},e.prototype.onStop=function(){this.styleSheetRuleTracker.stop(),this.recordingMutationsTracker.stop(),this.recordingBrowserEventsTracker.stop(),this.recordingPageEventsTracker.stop(),this.javaScriptErrorsTracker.stop()},e.prototype.clearStates=function(){this.pushEvents(),this.requestIndex.reset(),this.recordingBatch.setRequestParametersFromProvider(this.requestParameters),this.javaScriptErrorsCount=0},e.prototype.pushEvents=function(){this.recordingBatch.eventsCount()>0&&(this.isStarted?this.recordingRequest.send():this.recordingBatch.clearEvents())},e.prototype.triggerPageEvent=function(t){this.recordingBatch.addEvent({type:ht.PAGE_EVENT,date:N.now(),args:[{eventName:t.slice(0,e.MAX_PAGE_EVENT_LENGTH)}]})},e.prototype.triggerConsentGranted=function(){this.recordingBatch.addEvent({date:N.now(),type:ht.CONSENT_GRANTED})},e.prototype.triggerConsentWithdrawn=function(){this.recordingBatch.addEvent({date:N.now(),type:ht.CONSENT_WITHDRAWN})},e.MAX_PAGE_EVENT_LENGTH=255,e.MAX_JAVASCRIPT_ERROR_COUNT=20,e}(Nt),Dt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qt=function(t){function e(e,i,n){var r=t.call(this)||this;return r.recordingRecoveryRequest=e,r.recordingBatch=i,r.recoveryStorage=n,r.pageChangeHandler=function(){try{r.recordingBatch.eventsCount()>0&&r.recoveryStorage.save({events:r.recordingBatch.getEvents(),metadata:r.recordingBatch.getRequestParameters()})}catch(t){}},r}return Dt(e,t),e.prototype.onStart=function(){this.addPageChangeListener()},e.prototype.onStop=function(){this.removePageChangeListener()},e.prototype.recover=function(){this.sendPersistedRecordings()},e.prototype.sendPersistedRecordings=function(){var t=this.recoveryStorage.recover();if(null!==t){var e=t,i=e.metadata,n=e.events,r=new Tt(n,i);this.recordingRecoveryRequest.setRequestPayloadProvider(r),this.recordingRecoveryRequest.setRequestParametersProviders(r),this.recordingRecoveryRequest.send()}},e.prototype.addPageChangeListener=function(){window.addEventListener("pagehide",this.pageChangeHandler)},e.prototype.removePageChangeListener=function(){window.removeEventListener("pagehide",this.pageChangeHandler)},e}(Nt),Ut=function(){function t(t,e,i,n,r,o,s){this.consentService=t,this.domSerializer=e,this.nodeIdentifier=i,this.sensitiveContent=n,this.anonymization=r,this.configuration=o,this.urlService=s}return t.prototype.init=function(){this.resetAnonymization()},t.prototype.serializeDocument=function(t){return[this.domSerializer.serialize(t,{forceChildrenSerialization:!0,withAnonymization:this.useAnonymization})]},t.prototype.serializeMutationCharacterData=function(t){var e=this;return this.nodeIdentifier.ifIdentified(t.target,(function(i){var n=t.target.data;if(n!==t.oldValue)return[i,n=e.anonymizeTextIfNeeded(n)]}))},t.prototype.anonymizeTextIfNeeded=function(t){return this.useAnonymization?this.anonymization.anonymizeText(t):t},t.prototype.serializeAttachShadowEvent=function(t){var e=t.target,i=t.shadowRoot;if(this.nodeIdentifier.hasIdentifier(e)&&!this.nodeIdentifier.hasIdentifier(i))return[this.nodeIdentifier.getId(e),this.domSerializer.serialize(i)]},t.prototype.serializeMutationAttribute=function(t){var e=this,i=t.target,n=t.attributeName,r=t.attributeNamespace;return this.nodeIdentifier.ifIdentified(t.target,(function(o){if(!e.sensitiveContent.isSensitiveAttributeName(i,n)){var s=t.target.getAttributeNS(r,n);if(s!==t.oldValue)return s=e.anonymization.anonymizeAttributeIfNeeded(e.useAnonymization,n,s),[o,r,n,s]}}))},t.prototype.serializeMutationChildList=function(t){var e=this;return this.nodeIdentifier.ifIdentified(t.target,(function(i){if(!e.sensitiveContent.isSensitiveElementNode(t.target))return{removedNodes:e.serializeRemovedNodes(t),addedNodes:e.serializeAddedNodes(t,i)}}))},t.prototype.serializeRemovedNodes=function(t){for(var e=[],i=0;i<t.removedNodes.length;i+=1){var n=this.nodeIdentifier.popId(t.removedNodes[i]);n&&e.push([n])}return e},t.prototype.serializeAddedNodes=function(t,e){for(var i=[],n=t.nextSibling?this.nodeIdentifier.ifIdentified(t.nextSibling,(function(t){return t})):null,r=0;r<t.addedNodes.length;r+=1){var o=t.addedNodes[r];if(!this.nodeIdentifier.hasIdentifier(o)){var s=this.domSerializer.serialize(o,{withAnonymization:this.useAnonymization});i.push([e,n,s])}}return i},t.prototype.resetAnonymization=function(){this.useAnonymization=!this.consentService.isAllowedByConsent(),this.useAnonymization?this.configuration.replayRecordingUnmaskedUrlRegex&&this.configuration.replayRecordingUnmaskedUrlRegex.test(this.urlService.getUrl())&&(this.useAnonymization=!1):this.configuration.replayRecordingMaskedUrlRegex&&this.configuration.replayRecordingMaskedUrlRegex.test(this.urlService.getUrl())&&(this.useAnonymization=!0)},t}();function Vt(t){return Bt(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function zt(t){return t===parseInt(t,10)}function jt(t){return Bt(t)&&("string"==typeof t||t instanceof String)}function Ht(t){return"object"==typeof t}function Bt(t){return void 0!==t}function Ft(t){return Bt(t)&&null!==t}function Gt(t){return"function"==typeof t}function Wt(t){return t instanceof Element}var Xt=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yt=function(){function t(t,e,i){var n=this;this.monkeyPatcher=t,this.nodeIdentifier=e,this.staticResourceUrlTracker=i,this.canTrackRuleInsertions()&&(this.insertRuleInterceptor=this.monkeyPatcher.createFunctionInterceptor(window.CSSStyleSheet.prototype,"insertRule",(function(t,e,i){return n.sendInsertion(t,i)}))),this.canTrackStyleDeclarationChanges()&&(this.cssTextInterceptor=this.monkeyPatcher.createDescriptorInterceptor(window.CSSStyleDeclaration.prototype,"cssText",(function(t,e){return n.setStyleDeclarationCssText(t,e)})))}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){this.insertRuleInterceptor&&this.insertRuleInterceptor.activate(),this.cssTextInterceptor&&this.cssTextInterceptor.activate()},t.prototype.stop=function(){this.insertRuleInterceptor&&this.insertRuleInterceptor.deactivate(),this.cssTextInterceptor&&this.cssTextInterceptor.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,e){var i=this,n=this.getSyleSheet(t);n&&n.ownerNode&&this.nodeIdentifier.ifIdentified(n.ownerNode,(function(r){var o=i.indexOfRule(n.cssRules,t.parentRule);i.onEventCallback({date:N.now(),type:ht.STYLESHEET_CSS_TEXT_UPDATE,args:[r,o,e]}),i.staticResourceUrlTracker.scanCssString(e)}))},t.prototype.getSyleSheet=function(t){var e=t.parentRule;return e&&e.parentStyleSheet},t.prototype.indexOfRule=function(t,e){return Array.from(t).indexOf(e)},t.prototype.canTrackRuleInsertions=function(){return window.CSSStyleSheet&&window.CSSStyleSheet.prototype&&"function"==typeof window.CSSStyleSheet.prototype.insertRule},t.prototype.canTrackStyleDeclarationChanges=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,e){var i=this,n=e[0],r=e[1];this.nodeIdentifier.ifIdentified(t.ownerNode,(function(t){i.onEventCallback({date:N.now(),type:ht.STYLESHEET_RULE_INSERT,args:Bt(r)?[t,n,r]:[t,n]}),i.staticResourceUrlTracker.scanCssString(n)}))},Xt([et("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),Xt([et("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),t}(),Kt=function(){function t(){}return t.prototype.beforeSerialize=function(t,e){return t},t.prototype.beforeSerializeChildren=function(t,e,i){return e},t.prototype.beforeSerializeAttributes=function(t,e,i){return e},t.prototype.serializeNode=function(t,e,i){return e},t.prototype.serializeElementNode=function(t,e,i){return e},t.prototype.serializeAttribute=function(t,e,i,n){return i},t.prototype.serializeTextNode=function(t,e,i){return e},t.prototype.serializeCommentNode=function(t,e,i){return e},t.prototype.serializeDoctypeNode=function(t,e,i){return e},t.prototype.serializeDocumentNode=function(t,e,i){return e},t.prototype.serializeShadowRootNode=function(t,e,i){return e},t}(),Jt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qt=function(t){function e(){var e=t.call(this)||this;return e.identifierAddedHandlers=[],e.identifierRemovedHandlers=[],e.currentCsId=1,e}return Jt(e,t),e.prototype.beforeSerialize=function(t,e){return e.forceChildrenSerialization&&this.popId(t),t},e.prototype.beforeSerializeChildren=function(t,e){var i=this;return e.filter((function(t){return!i.hasIdentifier(t)}))},e.prototype.serializeNode=function(t,e){var i=this.currentCsId;return this.currentCsId+=1,t.__contentsquare_identifier=i,e.csId=i,this.notifySubscribers(this.identifierAddedHandlers,t),e},e.prototype.ifIdentified=function(t,e){if(this.hasIdentifier(t))return e(this.getId(t))},e.prototype.getId=function(t){return t.__contentsquare_identifier},e.prototype.onIdentifierAdded=function(t){this.identifierAddedHandlers.push(t)},e.prototype.onIdentifierRemoved=function(t){this.identifierRemovedHandlers.push(t)},e.prototype.popId=function(t){var e=this.getId(t);delete t.__contentsquare_identifier,this.notifySubscribers(this.identifierRemovedHandlers,t);for(var i=t.firstChild;null!==i;i=i.nextSibling)this.popId(i);var n=t.shadowRoot;return n&&this.popId(n),e},e.prototype.hasIdentifier=function(t){return"__contentsquare_identifier"in t},e.prototype.notifySubscribers=function(t,e){for(var i=0,n=t;i<n.length;i++){(0,n[i])(e)}},e}(Kt),Zt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$t=["value","checked","src","data","alt"],te=function(t){function e(e){var i=t.call(this)||this;return i.piiMaskingService=e,i}return Zt(e,t),e.prototype.beforeSerializeChildren=function(t,e){return this.isSensitiveElementNode(t)?[]:e},e.prototype.beforeSerializeAttributes=function(t,e){var i=this;return this.isSensitiveElementNode(t)&&(e.push(this.createSensitiveElementDimensionsAttribute(t)),this.isDataCSMaskNeeded(t)&&e.push(document.createAttribute("data-cs-mask"))),e.filter((function(e){return!i.isSensitiveAttribute(t,e.name,e.value)}))},e.prototype.isSensitiveElementNode=function(t){return s(t)&&(this.piiMaskingService.checkNodeMatch(t)||l(t))},e.prototype.isSensitiveAttributeName=function(t,e){return this.piiMaskingService.checkAttributeMatch(t,e)||this.isSensitiveElementNode(t)&&-1!==$t.indexOf(e)||this.isSensitiveInputValue(t,e)},e.prototype.isSensitiveAttribute=function(t,e,i){return this.isSensitiveAttributeName(t,e)||this.isSensitiveImage(t,e,i)},e.prototype.isSensitiveInputValue=function(t,e){return h(t)&&"value"===e&&"button"!==t.getAttribute("type")},e.prototype.isSensitiveImage=function(t,e,i){return u(t)&&"src"===e&&k(i,"data:")},e.prototype.isDataCSMaskNeeded=function(t){return!l(t)&&!t.hasAttribute("data-cs-mask")},e.prototype.createSensitiveElementDimensionsAttribute=function(t){var e=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: "+e.width+"px; height: "+e.height+"px;",i},e}(Kt);function ee(){return Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector}var ie,ne=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),re=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},oe=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","data-cs-override-id"],se=/[^\s]/g,ae=function(t){function e(e,i){var n=t.call(this)||this;return n.pii=e,n.configuration=i,n.allWhitelistedAttributes=[],n}return ne(e,t),e.prototype.init=function(){this.allWhitelistedAttributes=re(oe,this.configuration.whitelistedAttributes)},e.prototype.beforeSerializeChildren=function(t,e,i){return(p(t)||this.isWhitelistedElement(t))&&(i.withAnonymization=!1),e},e.prototype.serializeNode=function(t,e,i){return e.anonymized=i.withAnonymization,e},e.prototype.serializeAttribute=function(t,e,i,n){i.anonymized=n.withAnonymization;var r=this.anonymizeAttributeIfNeeded(n.withAnonymization,e.name,e.value);return i.value=this.piiAnonymizeAttributeIfNeeded(e.name,r),i},e.prototype.serializeTextNode=function(t,e,i){var n=t.data,r=i.withAnonymization?this.anonymizeText(n):n;return e.data=this.pii.anonymize(r),e},e.prototype.anonymizeAttributeIfNeeded=function(t,e,i){return t&&null!==i?this.isWhitelistedAttribute(e)?i:"":i},e.prototype.piiAnonymizeAttributeIfNeeded=function(t,e){return this.isWhitelistedAttribute(t)?e:this.pii.anonymize(e)},e.prototype.anonymizeText=function(t){return t.replace(se,"a")},e.prototype.setWhitelistedElementsSelector=function(t){this.whitelistedElementsSelector=t},e.prototype.isWhitelistedAttribute=function(t){return-1!==this.allWhitelistedAttributes.indexOf(t)},e.prototype.isWhitelistedElement=function(t){return s(t)&&(t.hasAttribute("data-cs-capture")||this.elementMatchesWhitelistedSelectors(t))},e.prototype.elementMatchesWhitelistedSelectors=function(t){return!!this.whitelistedElementsSelector&&ee().call(t,this.whitelistedElementsSelector)},e}(Kt),ce=function(){function t(t){this.storageName=t}return t.prototype.save=function(t){localStorage.setItem(this.storageName,JSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.storageName)},t.prototype.recover=function(){var t=localStorage.getItem(this.storageName);if(null===t)return null;var e=null;try{e=JSON.parse(t)}catch(e){tt.error("Invalid item in localStorage.\n         (key:"+this.storageName+"; value:"+t+")")}finally{this.clear()}return e},t}(),ue=function(){return(ue=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},pe=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.requestParametersProviders=t}return t.prototype.getRequestParameters=function(){return this.requestParametersProviders.reduce((function(t,e){return ue(ue({},e.getRequestParameters()),t)}),{})},t}(),he=function(){function t(t){this.asyncTaskFactory=t,this.userActive=!1,this.pendingInactivity=null}return t.prototype.start=function(){this.userActive=!0,this.createPendingInactivity()},t.prototype.stop=function(){this.userActive=!1,this.clearPendingInactivity()},t.prototype.trackActivity=function(){this.userActive||(this.onActivityResumedCallback(),this.userActive=!0),this.clearPendingInactivity(),this.createPendingInactivity()},t.prototype.createPendingInactivity=function(){var t=this;this.pendingInactivity=this.asyncTaskFactory.create("recorded user inactive",(function(){t.userActive=!1,t.clearPendingInactivity(),t.onActivityStoppedCallback()}),5e3)},t.prototype.clearPendingInactivity=function(){null!==this.pendingInactivity&&(this.pendingInactivity.cancel(),this.pendingInactivity=null)},t.prototype.isUserActive=function(){return this.userActive},t.prototype.onActivityStopped=function(t){this.onActivityStoppedCallback=t},t.prototype.onActivityResumed=function(t){this.onActivityResumedCallback=t},t}(),le=function(){function t(t,e,i){var n=this;this.taskName=t,this.task=e,this.timeout=i,this.timeoutId=setTimeout((function(){n.execute()}),this.timeout)}return t.prototype.execute=function(){var t=this;tt.tryToExecute(this.taskName,(function(){t.task()}))()},t.prototype.cancel=function(){clearTimeout(this.timeoutId)},t}(),fe=function(){function t(){}return t.prototype.create=function(t,e,i){return new le(t,e,i)},t}();!function(t){function e(){var t=[n()];return document.documentElement&&t.push(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&t.push(document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function n(){return window.innerHeight}function r(){return window.innerWidth}function o(){return screen.width}function s(){return screen.height}t.documentHeight=e,t.documentWidth=i,t.windowHeight=n,t.windowWidth=r,t.screenWidth=o,t.screenHeight=s,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:""+i(),dh:""+e(),ww:""+r(),wh:""+n(),sw:""+o(),sh:""+s()}}}(ie||(ie={}));var de=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ve=function(){function t(t,e){var i=this;this.location=t,this.pii=e,this.eventHandlers=[{boundElement:window,type:"resize",listener:function(){return i.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return i.hashChangeListener()}},{boundElement:window,type:"mousemove",listener:function(t){return i.mouseMoveListener(t)}},{boundElement:document,type:"visibilitychange",listener:function(){return i.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.onEventCallback=function(e){e.date=N.now(),t(e)}},t.prototype.start=function(){this.bindHandlers(),this.triggerInitialEvents()},t.prototype.stop=function(){this.unbindHandlers()},t.prototype.bindHandlers=function(){this.eventHandlers.forEach((function(t){return mt(t)}))},t.prototype.unbindHandlers=function(){this.eventHandlers.forEach((function(t){return St(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){this.onEventCallback({type:ht.RESIZE,args:[ie.windowWidth(),ie.windowHeight()]})},t.prototype.hashChangeListener=function(){this.onEventCallback({type:ht.HASH_CHANGE,args:[this.pii.anonymize(this.location.href)]})},t.prototype.visibilityChangeListener=function(){this.onEventCallback({type:ht.VISIBILITY_CHANGE,args:[document.visibilityState]})},t.prototype.mouseMoveListener=function(t){this.onEventCallback({type:ht.MOUSE_MOVE,args:[t.clientX,t.clientY]})},de([et("resize")],t.prototype,"resizeListener",null),de([et("hashChange")],t.prototype,"hashChangeListener",null),de([et("visibilityChange")],t.prototype,"visibilityChangeListener",null),de([et("mouseMove")],t.prototype,"mouseMoveListener",null),t}(),ge=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ye=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.recordingPageEventsTracker=e,o.recordingMutationsTracker=i,o.recordingActivityTracker=n,o.recordingRequest=r,o.recordingRequestDuringInactivityCount=0,o.isMutationTrackerStopped=!1,o}return ge(e,t),e.prototype.init=function(){var t=this;this.recordingPageEventsTracker.onEvent((function(){t.recordingActivityTracker.trackActivity(),t.recordingRequestDuringInactivityCount=0})),this.recordingRequest.after((function(){t.recordingRequestDuringInactivityCount+=1,t.stopMutationTrackerIfNeeded()})),this.recordingActivityTracker.onActivityStopped((function(){t.stopMutationTrackerIfNeeded()})),this.recordingActivityTracker.onActivityResumed((function(){t.isMutationTrackerStopped&&(t.recordingMutationsTracker.start(),t.isMutationTrackerStopped=!1)}))},e.prototype.onStart=function(){this.recordingActivityTracker.start()},e.prototype.onStop=function(){this.recordingActivityTracker.stop()},e.prototype.stopMutationTrackerIfNeeded=function(){!this.isMutationTrackerStopped&&!this.recordingActivityTracker.isUserActive()&&this.recordingRequestDuringInactivityCount>=2&&(this.recordingMutationsTracker.stop(),this.isMutationTrackerStopped=!0)},e}(Nt),me=i(3),Se=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};function Ee(t){return t.split(/,$/)[0]}var we,Ce=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),be=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toAbsoluteUrlHelperAnchor=document.createElement("a"),e}return Ce(e,t),e.prototype.onEvent=function(t){this.onEventCallback=t},e.prototype.serializeElementNode=function(t,e,i){return this.scanElement(t),e},e.prototype.beforeSerializeChildren=function(t,e,i){return this.scanStyleElement(t,e),e},e.prototype.scanElement=function(t){this.scanElementAttributes(t)},e.prototype.scanAttribute=function(t,e){this.scanElementAttributes(t,e)},e.prototype.scanText=function(t){a(t)&&t.parentNode&&p(t.parentNode)&&this.scanCssString(t.data)},e.prototype.scanStyleElement=function(t,e){if(p(t))for(var i=0,n=e;i<n.length;i++){var r=n[i];a(r)&&this.scanCssString(r.data)}},e.prototype.scanElementAttributes=function(t,e){this.scanCssLink(t,e),this.scanImage(t,e),this.scanStyleAttribute(t,e)},e.prototype.scanCssLink=function(t,e){!c(t)||e&&"href"!==e||!t.href||this.onStaticResourceUrl(t.href)},e.prototype.scanImage=function(t,e){u(t)&&(e&&"src"!==e||!t.src||this.isDataUrl(t.src)||null===t.getAttribute("src")||this.isHashStartUrl(t.getAttribute("src"))||this.onStaticResourceUrl(t.src),e&&"srcset"!==e||!t.srcset||this.scanSrcset(t.srcset))},e.prototype.scanStyleAttribute=function(t,e){if((!e||"style"===e)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},e.prototype.isHashStartUrl=function(t){return k(t,"#")},e.prototype.isDataUrl=function(t){return k(t,"data:")},e.prototype.scanCssString=function(t){this.processRawUrls(Object(me.extractFrom)(t))},e.prototype.scanSrcset=function(t){this.processRawUrls(function t(e){var i=e.trim();if(""===e)return[];var n=i.split(/\s(.+)/),r=n[0],o=n[1];return o?(O(r,",")||(o=function(t){return t.split(/,(.+)/)[1]||""}(o)),Se([Ee(r)],t(o))):[Ee(r)]}(t))},e.prototype.processRawUrls=function(t){var e=this;return t.filter((function(t){return!e.isDataUrl(t)})).filter((function(t){return!e.isHashStartUrl(t)})).map((function(t){return e.toAbsoluteUrl(t)})).forEach((function(t){return e.onStaticResourceUrl(t)}))},e.prototype.toAbsoluteUrl=function(t){return this.toAbsoluteUrlHelperAnchor.href=t,this.toAbsoluteUrlHelperAnchor.href},e.prototype.onStaticResourceUrl=function(t){this.onEventCallback({date:N.now(),type:ht.STATIC_RESOURCE_URL,args:[t]})},e}(Kt);!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}(we||(we={}));var Re,Te=function(){function t(t){this.windowPerformance=t.performance}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){this.areTimingsAvailable()&&this.recordPerformanceTimings()},t.prototype.recordPerformanceTimings=function(){var t=this.getPerformanceTimings();this.onEventCallback({args:t,date:N.now(),type:ht.PERFORMANCE_TIMINGS})},t.prototype.areTimingsAvailable=function(){return!(!this.windowPerformance||!this.windowPerformance.timing)},t.prototype.getPerformanceTimings=function(){return[{performanceTiming:we.REQUEST_START,timestamp:this.windowPerformance.timing.requestStart},{performanceTiming:we.DOM_INTERACTIVE,timestamp:this.windowPerformance.timing.domInteractive}]},t}(),ke=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oe=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Pe=function(t){function e(e,i){var n=t.call(this)||this;return n.monkeyPatcher=e,n.nodeIdentifier=i,n}return ke(e,t),e.prototype.init=function(){this.initInterceptors(),this.initSubscribers(),this.initMutationObserver()},e.prototype.initMutationObserver=function(){var t=this;this.observer=new MutationObserver((function(e){t.handleMutations(e)}))},e.prototype.initInterceptors=function(){var t=this;this.supportAttachShadow()&&(this.attachShadowInterceptor=this.monkeyPatcher.createFunctionInterceptor(Element.prototype,"attachShadow",(function(e,i){return t.handleAttachShadow(e,i)}))),this.supportCreateShadowRoot()&&(this.createShadowRootInterceptor=this.monkeyPatcher.createFunctionInterceptor(Element.prototype,"createShadowRoot",(function(e,i){return t.handleAttachShadow(e,i)})))},e.prototype.initSubscribers=function(){var t=this;this.nodeIdentifier.onIdentifierAdded((function(e){f(e)&&t.observe(e)}))},e.prototype.onChildListMutation=function(t){this.childListMutationCallback=t},e.prototype.onCharacterDataMutation=function(t){this.characterDataMutationCallback=t},e.prototype.onAttributesMutation=function(t){this.attributesMutationCallback=t},e.prototype.onAttachShadowMutation=function(t){this.attachShadowMutationCallback=t},e.prototype.observe=function(t){if(!this.isStarted)throw new Error("MutationObserverService not started");this.observer.observe(t,{subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0})},e.prototype.onStart=function(){this.attachShadowInterceptor&&this.attachShadowInterceptor.activate(),this.createShadowRootInterceptor&&this.createShadowRootInterceptor.activate()},e.prototype.onStop=function(){this.attachShadowInterceptor&&this.attachShadowInterceptor.deactivate(),this.createShadowRootInterceptor&&this.createShadowRootInterceptor.deactivate(),this.observer.disconnect()},e.prototype.supportAttachShadow=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},e.prototype.supportCreateShadowRoot=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},e.prototype.handleMutations=function(t){for(var e=N.now(),i=0;i<t.length;i+=1){var n=t[i];switch(n.date=e,n.type){case"attributes":this.attributesMutationCallback(n);break;case"characterData":this.characterDataMutationCallback(n);break;case"childList":this.childListMutationCallback(n);break;default:throw new Error("mutation type is not supported")}}},e.prototype.handleAttachShadow=function(t,e){this.attachShadowMutationCallback({shadowRoot:e,date:N.now(),target:t})},Oe([et("mutations")],e.prototype,"handleMutations",null),e}(Nt),_e=function(){return(_e=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(Re||(Re={}));var Ae=function(){function t(t){this.processors=t}return t.prototype.serialize=function(t,e){void 0===e&&(e={});var i=_e({},e),n=t.nodeType,r=this.processors.reduce((function(t,e){return e.beforeSerialize(t,i)}),t);switch(n){case Node.ELEMENT_NODE:return this.serializeElementNode(r,i);case Node.TEXT_NODE:return this.serializeTextNode(r,i);case Node.COMMENT_NODE:return this.serializeCommentNode(r,i);case Node.DOCUMENT_TYPE_NODE:return this.serializeDoctypeNode(r,i);case Node.DOCUMENT_NODE:return this.serializeDocumentNode(r,i);case Node.DOCUMENT_FRAGMENT_NODE:return this.serializeDocumentFragmentNode(r,i);default:throw new Error("serialization is not supported (nodeType: "+n+")")}},t.prototype.serializeElementNode=function(t,e){var i,n=this.processors.reduce((function(i,n){var r=n.serializeNode(t,i,e);return n.serializeElementNode(t,r,e)}),{attributes:[]});(i=n.attributes).push.apply(i,this.serializeAttributes(t,e));var r=t.shadowRoot;return r&&(n.shadowRoot=this.serializeShadowRootNode(r,e)),n.children=this.serializeChildren(t,e),n},t.prototype.serializeAttributes=function(t,e){var i=this,n=g(t.attributes);return this.processors.reduce((function(i,n){return n.beforeSerializeAttributes(t,i,e)}),n).map((function(n){return i.serializeAttribute(t,n,e)}))},t.prototype.serializeAttribute=function(t,e,i){return this.processors.reduce((function(n,r){return r.serializeAttribute(t,e,n,i)}),{})},t.prototype.serializeChildren=function(t,e){var i=this,n=g(t.childNodes);return this.processors.reduce((function(i,n){return n.beforeSerializeChildren(t,i,e)}),n).map((function(t){return i.serialize(t,e)}))},t.prototype.serializeTextNode=function(t,e){return this.processors.reduce((function(i,n){var r=n.serializeNode(t,i,e);return n.serializeTextNode(t,r,e)}),{})},t.prototype.serializeCommentNode=function(t,e){return this.processors.reduce((function(i,n){var r=n.serializeNode(t,i,e);return n.serializeCommentNode(t,r,e)}),{})},t.prototype.serializeDoctypeNode=function(t,e){return this.processors.reduce((function(i,n){var r=n.serializeNode(t,i,e);return n.serializeDoctypeNode(t,r,e)}),{})},t.prototype.serializeDocumentNode=function(t,e){var i=this.processors.reduce((function(i,n){var r=n.serializeNode(t,i,e);return n.serializeDocumentNode(t,r,e)}),{});return i.children=this.serializeChildren(t,e),i},t.prototype.serializeShadowRootNode=function(t,e){var i=this.processors.reduce((function(i,n){var r=n.serializeNode(t,i,e);return n.serializeShadowRootNode(t,r,e)}),{});return i.children=this.serializeChildren(t,e),i},t.prototype.serializeDocumentFragmentNode=function(t,e){if(t.mode)return this.serializeShadowRootNode(t,e);throw new Error("Not implemented yet.")},t}(),Ie=(i(1),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.beforeSerializeChildren=function(t,e){if(p(t)){var i=this.cssRules(t);this.isEmptyStyleElementWithRules(t,i)&&e.push(this.createTextNodeFromRules(i))}return e},e.prototype.cssRules=function(t){try{var e=t.sheet;if(!e)return;return e.cssRules||e.rules}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return}},e.prototype.isEmptyStyleElementWithRules=function(t,e){var i=t.textContent||"";return/^\s*$/.test(i)&&void 0!==e&&0!==e.length},e.prototype.createTextNodeFromRules=function(t){var e=g(t).map((function(t){return t.cssText})).join("");return document.createTextNode(e)},e.prototype.serializeNode=function(t,e){return e.nodeType=t.nodeType,e.format=Re.WebElement,e},e.prototype.serializeElementNode=function(t,e){return e.localName=t.localName,e.namespaceURI=t.namespaceURI,e},e.prototype.serializeAttribute=function(t,e,i){return i.name=e.name,i.value=e.value,i.namespaceURI=null!==e.namespaceURI?e.namespaceURI:"",i},e.prototype.serializeTextNode=function(t,e){return e.data=t.data,e},e.prototype.serializeCommentNode=function(t,e){return e.data=t.data,e},e.prototype.serializeDoctypeNode=function(t,e){return e.name=t.name,e.publicId=t.publicId,e.systemId=t.systemId,e},e.prototype.serializeDocumentNode=function(t,i){return i.baseURI=e.getBaseURI(t),i},e.prototype.serializeShadowRootNode=function(t,e){return e.mode=t.mode,e},e.getBaseURI=function(t){var e=t.baseURI;if(null==e){var i=t.getElementsByTagName("base");e=0!==i.length?i[0].href:t.URL}return e},e}(Kt),Le=(function(){function t(t){this.processors=t}t.prototype.unserialize=function(t){if(void 0!==t.format&&t.format!==Re.WebElement)throw new Error("unserialization is not supported (format: "+t.format+")");var e=t.nodeType;switch(e){case Node.ELEMENT_NODE:return this.unserializeElementNode(t);case Node.TEXT_NODE:return this.unserializeTextNode(t);case Node.COMMENT_NODE:return this.unserializeCommentNode(t);case Node.DOCUMENT_TYPE_NODE:return this.unserializeDoctypeNode(t);case Node.DOCUMENT_NODE:return this.unserializeDocumentNode(t);default:throw new Error("unserialization is not supported (nodeType: "+e+")")}},t.prototype.unserializeShadowRoot=function(t,e){var i=this.processors.reduce((function(i,n){var r=n.unserializeShadowRoot(t,e,i);return n.unserializeNode(e,r)}),null);return this.unserializeChildren(i,e.children),i},t.prototype.unserializeElementNode=function(t){var e=this.processors.reduce((function(e,i){var n=i.unserializeElementNode(t,e);return i.unserializeNode(t,n)}),null);return this.unserializeAttributes(e,t.attributes),this.unserializeChildren(e,t.children),t.shadowRoot&&this.unserializeShadowRoot(e,t.shadowRoot),e},t.prototype.unserializeChildren=function(t,e){var i=this;g(e).forEach((function(e){return t.appendChild(i.unserialize(e))}))},t.prototype.unserializeAttributes=function(t,e){var i=this;g(e).forEach((function(e){try{i.unserializeAttribute(t,e)}catch(t){}}))},t.prototype.unserializeAttribute=function(t,e){this.processors.reduce((function(t,i){return i.unserializeAttribute(e,t)}),t)},t.prototype.unserializeTextNode=function(t){return this.processors.reduce((function(e,i){var n=i.unserializeTextNode(t,e);return i.unserializeNode(t,n)}),null)},t.prototype.unserializeCommentNode=function(t){return this.processors.reduce((function(e,i){var n=i.unserializeCommentNode(t,e);return i.unserializeNode(t,n)}),null)},t.prototype.unserializeDoctypeNode=function(t){return this.processors.reduce((function(e,i){var n=i.unserializeDoctypeNode(t,e);return i.unserializeNode(t,n)}),null)},t.prototype.unserializeDocumentNode=function(t){var e=this,i=this.processors.reduce((function(e,i){var n=i.unserializeDocumentNode(t,e);return i.unserializeNode(t,n)}),null);return g(t.children).forEach((function(t){return i.appendChild(e.unserialize(t))})),i}}(),i(2),function(){function t(){}return t.prototype.unserializeShadowRoot=function(t,e,i){return i},t.prototype.unserializeNode=function(t,e){return e},t.prototype.unserializeElementNode=function(t,e){return e},t.prototype.unserializeAttribute=function(t,e){return e},t.prototype.unserializeTextNode=function(t,e){return e},t.prototype.unserializeCommentNode=function(t,e){return e},t.prototype.unserializeDoctypeNode=function(t,e){return e},t.prototype.unserializeDocumentNode=function(t,e){return e},t}()),xe=function(){function t(){this.domParser=new DOMParser}return t.prototype.createElement=function(t){var e=this.htmlSanitizer(t);return this.parseHtmlElement("<"+e+" />")},t.prototype.createAttribute=function(t,e){var i=this.htmlSanitizer(t),n=this.parseHtmlElement("<div "+i+'=""></div>'),r=n.getAttributeNode(i);return n.removeAttributeNode(r),r.value=e,r},t.prototype.parseHtmlElement=function(t){return this.domParser.parseFromString(t,"text/html").body.children[0]},t.prototype.htmlSanitizer=function(t){return t.replace(/[\s<>\/\0]/g,"")},t}(),Me=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),De=(function(t){function e(e){var i=t.call(this)||this;return i.document=e,i.dirtyElementBuilder=new xe,i}Me(e,t),e.prototype.unserializeShadowRoot=function(t,e){return e.mode,t.attachShadow({mode:"open"})},e.prototype.unserializeElementNode=function(t){var e=this.getTagName(t),i=t.namespaceURI;try{return this.isXhtmlNamespace(i)&&e.indexOf(":")>-1?this.document.createElement(e):this.document.createElementNS(i,e)}catch(t){switch(t.name){case"InvalidCharacterError":return this.dirtyElementBuilder.createElement(e);default:throw t}}},e.prototype.unserializeAttribute=function(t,e){try{e.setAttributeNS(t.namespaceURI,t.name,t.value)}catch(i){switch(i.name){case"NamespaceError":e.setAttribute(t.name,t.value);break;case"InvalidCharacterError":e.setAttributeNode(this.dirtyElementBuilder.createAttribute(t.name,t.value));break;default:throw i}}return e},e.prototype.unserializeTextNode=function(t){return this.document.createTextNode(t.data)},e.prototype.unserializeCommentNode=function(t){return this.document.createComment(t.data)},e.prototype.unserializeDoctypeNode=function(t){return this.document.implementation.createDocumentType(t.name,t.publicId,t.systemId)},e.prototype.unserializeDocumentNode=function(){return this.document.implementation.createDocument(null,null,null)},e.prototype.isXhtmlNamespace=function(t){return"http://www.w3.org/1999/xhtml"===t},e.prototype.isSvgNamespace=function(t){return"http://www.w3.org/2000/svg"===t},e.prototype.getTagName=function(t){var e=t,i=e.localName,n=e.tagName;return i||(this.isSvgNamespace(t.namespaceURI)?n:n.toLowerCase())}}(Le),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),qe=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},Ue=function(t){function e(e){return t.call(this,qe([new Ne],e))||this}return De(e,t),e}(Ae),Ve=function(){return(Ve=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ze=function(){function t(){}return t.prototype.copyFunctionSignature=function(t,e){t.prototype=e.prototype,Object.defineProperty(t,"toString",{value:function(){return e.toString()}})},t.prototype.createFunctionInterceptor=function(t,e,i){var n;if(!(null===(n=Object.getOwnPropertyDescriptor(t,e))||void 0===n?void 0:n.writable))return tt.warn("Cannot intercept read only function '"+e+"' of object '"+t+"'"),null;var r=!1,o=t[e];if("function"==typeof o){var s=function(){var t=this,e=arguments,n=o.apply(this,e);return r&&tt.tryToExecute("FunctionInterceptor",(function(){i(t,n,e)}))(),n};this.copyFunctionSignature(s,o),t[e]=s}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}},t.prototype.createDescriptorInterceptor=function(t,e,i){var n=!1,r=Object.getOwnPropertyDescriptor(t,e);if(r){if(!r.configurable)return tt.warn("Cannot intercept read only property '"+e+"' of object '"+t+"'"),null;Object.defineProperty(t,e,Ve(Ve({},r.get?{get:function(){return r.get.apply(this,arguments)}}:{}),r.set?{set:function(){var t=this,e=arguments,o=r.set.apply(this,e);return n&&tt.tryToExecute("DescriptorInterceptor",(function(){i(t,e[0])}))(),o}}:{}))}return{activate:function(){return n=!0},deactivate:function(){return n=!1}}},t}(),je=function(){function t(t,e,i,n,r,o,s,a,c,u,p,h){this.sessionService=t,this.configuration=e,this.compressor=i,this.selector=n,this.consentService=r,this.basicParameters=o,this.commandsService=s,this.pii=a,this.sessionRenewer=c,this.urlService=u,this.piiMaskingService=p,this.javaScriptErrorsTracker=h}return t.prototype.init=function(){var t=this,e=new ze,i=new Qt,n=new te(this.piiMaskingService);this.anonymizationService=new ae(this.pii,this.configuration),this.anonymizationService.init();var r=new be,o=new Pe(e,i),s=new Ue([i,n,this.anonymizationService,r]),a=new Tt,c=new kt,u=new pe(c,this.basicParameters),p=this.createRecordingPostRequest(this.compressor);this.mutationSerializer=new Ut(this.consentService,s,i,n,this.anonymizationService,this.configuration,this.urlService),this.mutationSerializer.init();var h=new Ct(this.selector,i,n),l=new bt(this.mutationSerializer,o,r);this.recordingService=new Mt(this.configuration,p,a,u,c,new Yt(e,i,r),l,h,new ve(window.location,this.pii),this.sessionRenewer,r,new Te(window),this.javaScriptErrorsTracker),this.recordingInactivityService=new ye(h,l,new he(new fe),p);var f=new ce("csPersisted"),d=this.createRecordingPostRequest(this.compressor);this.recordingRecoveryService=new qt(d,a,f),o.init(),this.recordingInactivityService.init(),this.recordingService.init(),this.commandsService.register("isRecording",(function(){return t.sessionService.isReplayRecorded()})),this.commandsService.register("setCapturedElementsSelector",(function(e){t.anonymizationService.setWhitelistedElementsSelector(e)})),this.commandsService.register("setPIISelectors",(function(e){t.piiMaskingService.setPIISelectors(e)}))},t.prototype.onStartTracking=function(){this.recordingRecoveryService.recover(),this.sessionService.isReplayRecorded()&&(this.recordingInactivityService.start(),this.recordingService.start(),this.recordingRecoveryService.start())},t.prototype.onAfterArtificialPageView=function(){this.recordingService.clearStates(),this.mutationSerializer.resetAnonymization(),this.sessionService.isReplayRecorded()?(this.recordingInactivityService.restart(),this.recordingService.restart(),this.recordingRecoveryService.restart()):(this.recordingInactivityService.stop(),this.recordingService.stop(),this.recordingRecoveryService.stop())},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.recordingInactivityService.stop(),this.recordingService.stop(),this.recordingRecoveryService.stop()},t.prototype.onOptout=function(){this.recordingInactivityService.stop(),this.recordingService.stop(),this.recordingRecoveryService.stop()},t.prototype.onPageEvent=function(t){this.recordingService.triggerPageEvent(t)},t.prototype.onEventTriggerRecording=function(t){this.recordingService.triggerPageEvent(t)},t.prototype.onConsentGranted=function(){this.mutationSerializer.resetAnonymization(),this.recordingService.triggerConsentGranted()},t.prototype.onConsentWithdrawn=function(){this.mutationSerializer.resetAnonymization(),this.recordingService.triggerConsentWithdrawn()},t.prototype.createRecordingPostRequest=function(t){return new yt(this.configuration.getRecordingUri(),"recording",t)},t.isSupported=function(){var t=new At(T),e="MutationObserver"in window&&t.isSupported()&&"visibilityState"in document;return t.terminateWorker(),e},t}(),He=function(){function t(t,e){this.visitorService=t,this.sessionService=e,this.naturalPageViewSent=!1}return t.prototype.isNaturalPageViewSent=function(){return this.naturalPageViewSent},t.prototype.setNaturalPageViewSent=function(t){this.naturalPageViewSent=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),e=this.getPageNumber();return t&&e?{sessionKey:t,pageNumber:e}:null},t.prototype.getSessionKey=function(){if(this.visitorService.doesVisitorExist()){var t=this.visitorService.getVisitor();return t.id+"."+t.visitsCount}return null},t.prototype.getPageNumber=function(){return this.sessionService.doesSessionExist()?this.sessionService.getSession().pageNumber:null},t}(),Be=function(){function t(t){this.trackingContextService=t,this.registeredCallbacks=[]}return t.prototype.handleCommand=function(t){if(Gt(t)&&(this.registerCallback(t),this.trackingContextService.isNaturalPageViewSent())){var e=this.trackingContextService.getTrackingContext();null!==e&&this.executeAsync(t,e)}},t.prototype.registerCallback=function(t){this.registeredCallbacks.push(t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,e=this.trackingContextService.getTrackingContext();null!==e&&this.registeredCallbacks.map((function(i){return t.executeAsync(i,e)}))},t.prototype.executeAsync=function(t,e){setTimeout((function(){t(e)}))},t}(),Fe=function(){function t(t){this.trackingContextService=t,this.pendingCallbacks=[]}return t.prototype.handleCommand=function(t){return this.trackingContextService.isNaturalPageViewSent()?this.applyGetSessionKey(t):void this.addPendingCallback(t)},t.prototype.applyGetSessionKey=function(t){var e=this.trackingContextService.getSessionKey();return this.hasCallback(t)&&null!==e&&this.executeAsync(t.callback,e),e},t.prototype.addPendingCallback=function(t){this.hasCallback(t)&&this.pendingCallbacks.push(t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,e=this.trackingContextService.getSessionKey();null!==e&&this.pendingCallbacks.forEach((function(i){t.executeAsync(i,e)})),this.pendingCallbacks=[]},t.prototype.hasCallback=function(t){return t&&"function"==typeof t.callback},t.prototype.executeAsync=function(t,e){setTimeout((function(){t(e)}))},t}(),Ge=function(){function t(t,e,i){this.visitorService=t,this.sessionService=e,this.commandsService=i}return t.prototype.init=function(){var t=this;this.trackingContextService=new He(this.visitorService,this.sessionService),this.afterPageViewService=new Be(this.trackingContextService),this.getSessionKeyService=new Fe(this.trackingContextService),this.commandsService.register("getSessionKey",(function(e){return t.getSessionKeyService.handleCommand(e)})),this.commandsService.register("afterPageView",(function(e){t.afterPageViewService.handleCommand(e)}))},t.prototype.onAfterNaturalPageView=function(){this.trackingContextService.setNaturalPageViewSent(!0),this.getSessionKeyService.flushPendingCallbacks(),this.afterPageViewService.executeRegisteredCallbacks()},t.prototype.onAfterArtificialPageView=function(){this.afterPageViewService.executeRegisteredCallbacks()},t}(),We=function(){function t(t,e){this.key=t.slice(0,50),this.value=jt(e)?e.slice(0,255):e}return t.isValid=function(t,e){return jt(t)&&(jt(e)||zt(e))},t}(),Xe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ye=function(t){function e(e,i){var n=t.call(this)||this;return n.batch=e,n.pii=i,n.dynamicVariablesQueue=[],n}return Xe(e,t),e.prototype.onStart=function(){var t=this;this.dynamicVariablesQueue.forEach((function(e){return t.trackDynamicVariable(e.key,e.value)})),this.dynamicVariablesQueue=[]},e.prototype.onStop=function(){},e.prototype.trackDynamicVariable=function(t,e){this.isStarted?We.isValid(t,e)&&this.batch.add(new We(this.pii.anonymize(t),this.pii.anonymize(e))):this.dynamicVariablesQueue.push({key:t,value:e})},e}(Nt),Ke=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};var Je,Qe,Ze,$e=function(t){return void 0===t&&(t=0),function(e,i,n){var r=n.value,o=!1;n.value=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];o||(o=!0,setTimeout((function(){r.apply(e,i),o=!1}),t))}}},ti=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ei=function(){function t(t){this.compressor=t,this.batch=[]}return t.prototype.add=function(t){this.batch.push(t),this.setBatchReadyCall()},t.prototype.clear=function(){this.batch=[]},t.prototype.onBatchReady=function(t){this.batchReadyCallback=t},t.prototype.getRequestParameters=function(){for(var t={},e=0,i=this.batch;e<i.length;e++){var n=i[e];t[n.key]=n.value}return{dv:this.compressor.compressSync(JSON.stringify(t))}},t.prototype.setBatchReadyCall=function(){this.batchReadyCallback()},ti([$e(),et("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),ii=function(){function t(t,e,i,n,r,o){this.commandsService=t,this.sessionService=e,this.configuration=i,this.basicParameters=n,this.compressor=r,this.pii=o,this.request=new W(this.configuration.getTrackerUri(),"dvar"),this.batch=new ei(this.compressor),this.service=new Ye(this.batch,this.pii)}return t.prototype.init=function(){var t=this;this.request.setRequestParametersProviders(this.basicParameters,this.batch),this.sessionService.setDynamicVariablesService(this.service),this.batch.onBatchReady((function(){return t.request.send()})),this.request.after((function(){return t.batch.clear()})),this.commandsService.register("trackDynamicVariable",(function(e){var i=void 0===e?{}:e,n=i.key,r=i.value;t.service.trackDynamicVariable(n,r)}))},t.prototype.onStartTracking=function(){this.service.start()},t}(),ni=function(){function t(t,e){this.id=t,this.revenue=e}return t.from=function(e){var i=new t(e.id,parseFloat(e.revenue));return isNaN(parseFloat(e.tax))||(i.tax=parseFloat(e.tax)),isNaN(parseFloat(e.shipping))||(i.shipping=parseFloat(e.shipping)),jt(e.currency)&&e.currency.length<=10&&(i.currency=e.currency),i},t}(),ri=function(){function t(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}return t.from=function(e){if(!t.isValid(e))return null;var i=new t(e.id,e.name,parseFloat(e.price),parseInt(e.quantity,10));return Bt(e.sku)&&(i.sku=e.sku),Bt(e.category)&&(i.category=e.category),i},t.isValid=function(t){return jt(t.id)&&jt(t.name)&&Vt(parseFloat(t.price))&&zt(parseInt(t.quantity,10))&&(!Bt(t.sku)||jt(t.sku))&&(!Bt(t.category)||jt(t.category))},t}(),oi=function(){function t(t,e,i){this.pii=t,this.transactionRequest=e,this.sessionRenewer=i,this.clear()}return t.prototype.addTransaction=function(t){var e=this.pii.anonymizeFields(t,["id"]);this.transaction=ni.from(e)},t.prototype.getTransaction=function(){return this.transaction},t.prototype.sendTransaction=function(){this.sessionRenewer.isSessionValid()&&this.transactionRequest.send()},t.prototype.addItem=function(t){if(!Gt(t)){var e=this.pii.anonymizeFields(t,["id","name","sku","category"]),i=ri.from(e);null!==i&&this.transactionItems.push(i)}},t.prototype.getItems=function(){return this.transactionItems},t.prototype.clear=function(){this.transaction={id:void 0,revenue:NaN},this.transactionItems=[]},t.prototype.getRequestParameters=function(){var t={id:this.transaction.id?""+this.transaction.id:"",revenue:""+this.transaction.revenue};return Bt(this.transaction.tax)&&(t.tax=""+this.transaction.tax),Bt(this.transaction.shipping)&&(t.shipping=""+this.transaction.shipping),Bt(this.transaction.currency)&&(t.cu=""+this.transaction.currency),t.items=window.JSON.stringify(this.transactionItems),t},t}(),si=function(){function t(t){this.skuItem=t.slice(0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.skuItem},enumerable:!1,configurable:!0}),t}(),ai=function(){function t(t,e){this.cartItemRequest=t,this.sessionRenewer=e,this.cartItem=null}return t.prototype.addToCart=function(t){this.isValidSku(t.sku)&&(this.cartItem=new si(t.sku),this.sendCartItem())},t.prototype.isValidSku=function(t){return jt(t)&&t.length>0},t.prototype.getCartItem=function(){return this.cartItem},t.prototype.sendCartItem=function(){this.sessionRenewer.isSessionValid()&&this.cartItemRequest.send()},t.prototype.clear=function(){this.cartItem=null},t.prototype.getRequestParameters=function(){return this.cartItem?{sku:""+this.cartItem.sku}:{}},t}(),ci=function(){function t(t,e,i,n,r,o,s){this.configuration=t,this.visitorService=e,this.sessionService=i,this.commandsService=n,this.pii=r,this.sessionRenewer=o,this.urlService=s}return t.prototype.init=function(){var t=new W(this.configuration.getTrackerUri(),"transaction"),e=new W(this.configuration.getTrackerUri(),"addtocart"),i=new oi(this.pii,t,this.sessionRenewer),r=new ai(e,this.sessionRenewer);t.setRequestParametersProviders(this.configuration,this.visitorService,this.sessionService,this.urlService,i,n),t.after((function(){i.clear()})),e.setRequestParametersProviders(this.configuration,this.visitorService,this.sessionService,this.urlService,r,n),e.after((function(){r.clear()})),this.commandsService.register("ecommerce:addTransaction",(function(t){i.addTransaction(t)})),this.commandsService.register("ecommerce:addItem",(function(t){return i.addItem(t)})),this.commandsService.register("ecommerce:send",(function(){return i.sendTransaction()})),this.commandsService.register("ecommerce:addToCart",(function(t){r.addToCart(t)}))},t}(),ui=function(){function t(t){this.windowPerformance=t.performance}return t.prototype.getRequestParameters=function(){if(this.areTimingsUnavailable())return{};var t=this.compute();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.compute=function(){var t=this.windowPerformance.timing;return{startRender:""+(t.domLoading-t.requestStart),domInteractive:""+(t.domInteractive-t.requestStart),domComplete:""+(t.domComplete-t.requestStart),fullyLoaded:""+(t.loadEventEnd-t.requestStart)}},t.prototype.areTimingsUnavailable=function(){return!(this.windowPerformance&&this.windowPerformance.timing&&this.windowPerformance.timing.loadEventEnd>0)},t}();!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK"}(Je||(Je={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(Qe||(Qe={})),function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP"}(Ze||(Ze={}));var pi=function(){},hi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),li=function(t){function e(e,i){var n=t.call(this)||this;return n.projectConfiguration=e,n.pathComputation=i,n.supportedEventTypes=[Ze.MOUSEDOWN,Ze.MOUSEUP,Ze.CLICK,Ze.MOUSEOVER,Ze.TAP],n}return hi(e,t),e.prototype.isEventTypeSupported=function(t){return-1!==this.supportedEventTypes.indexOf(t)},e.prototype.enhanceAnalysisEvent=function(t,e){if(this.projectConfiguration.eMerchandisingEnabled){var i=this.pathComputation.getTargetPathAndTargetLink(t),n=i.path,r=i.targetLink;e.target=n,e.targetLink=r}else e.target=this.pathComputation.getTargetPath(t),e.targetLink="";return e},e}(pi),fi=function(t){return null!==t.target&&t.target.shadowRoot&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:t.target},di=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vi=function(t){function e(e){var i=t.call(this)||this;return i.projectConfiguration=e,i.supportedEventTypes=[Ze.CLICK,Ze.MOUSEDOWN,Ze.MOUSEUP,Ze.TAP],i}return di(e,t),e.prototype.isEventTypeSupported=function(t){return-1!==this.supportedEventTypes.indexOf(t)},e.prototype.enhanceAnalysisEvent=function(t,e){if(this.projectConfiguration.autoInsightsEnabled){e.className="",e.typeAttribute="";var i=fi(t);i&&s(i)&&(e.className=i.className,(s(n=i)&&"button"===n.localName||h(i))&&(e.typeAttribute=i.type))}var n;return e},e}(pi),gi=function(){function t(t,e,i){var n=this;this.configuration=t,this.pathComputation=e,this.gestureTracker=i,this.analysisEventsEnhancers=[new li(this.configuration,this.pathComputation),new vi(this.configuration)],this.gestureTracker.onEvent((function(t,e){return n.onTap(t,e)}))}return t.prototype.onTap=function(t,e){if(t.type===Je.TAP){var i=this.buildAnalysisEvent(e,{type:Ze.TAP});i.target!==w.INVALID_ELEMENT&&this.onEventCallback(i)}},t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){this.gestureTracker.start()},t.prototype.stop=function(){this.gestureTracker.stop()},t.prototype.buildAnalysisEvent=function(t,e){return this.analysisEventsEnhancers.filter((function(t){return t.isEventTypeSupported(e.type)})).reduce((function(e,i){return i.enhanceAnalysisEvent(t,e)}),e)},t}(),yi=function(){function t(){}return t.prototype.compute=function(t,e){var i=this.convertPixelsToDPs(e.x)-this.convertPixelsToDPs(t.x),n=this.convertPixelsToDPs(e.y)-this.convertPixelsToDPs(t.y),r=e.time-t.time;return{duration:r,distance:this.computeGestureDistance(i,n),direction:this.computeGestureDirection(i,n),velocity:this.computeGestureVelocity(i,n,r)}},t.prototype.convertPixelsToDPs=function(t){return t/window.devicePixelRatio},t.prototype.computeGestureDistance=function(t,e){return Math.round(Math.sqrt(t*t+e*e))},t.prototype.computeGestureVelocity=function(t,e,i){var n=i/1e3,r=t/n,o=e/n;return Math.round(Math.abs(r)+Math.abs(o))},t.prototype.computeGestureDirection=function(t,e){return Math.abs(t)>Math.abs(e)?t>0?Qe.RIGHT:Qe.LEFT:e>0?Qe.DOWN:Qe.UP},t}(),mi=function(){function t(){this.metricsComputer=new yi,this.reset()}return t.prototype.onGesture=function(t){this.onGestureCallback=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){this.isGestureStart(t)&&this.reset(),this.pendingInputs.push({x:t.touches[0].pageX,y:t.touches[0].pageY,time:Date.now()}),this.target=fi(t)},t.prototype.processActionMove=function(){this.hasMove=!0},t.prototype.processActionUp=function(t){this.pendingInputs.push({x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,time:Date.now()}),this.isValidSingleTouchGesture()&&this.runDetection(t)},t.prototype.reset=function(){this.pendingInputs=[],this.target=null,this.hasMove=!1},t.prototype.runDetection=function(t){var e=this.metricsComputer.compute(this.pendingInputs[0],this.pendingInputs[1]),i=this.hasMove?this.computeSwipeGesture(e):this.computePressGesture(e);this.onGestureCallback(i,t)},t.prototype.computeSwipeGesture=function(t){return{type:t.velocity<100?Je.DRAG:Je.FLICK,target:this.target,velocity:t.velocity,distance:t.distance,direction:t.direction}},t.prototype.computePressGesture=function(t){return{type:t.duration<1e3?Je.TAP:Je.LONG_PRESS,target:this.target}},t.prototype.isGestureStart=function(t){return 1===t.touches.length},t.prototype.isValidSingleTouchGesture=function(){return 2===this.pendingInputs.length},t}(),Si=function(){function t(t){var e=this;this.logger=t,this.eventHandlers=[{boundElement:document,type:"touchstart",listener:function(t){return e.processEvent(t)}},{boundElement:document,type:"touchmove",listener:function(t){return e.processEvent(t)}},{boundElement:document,type:"touchend",listener:function(t){return e.processEvent(t)}}],this.detector=new mi}return t.prototype.onEvent=function(t){this.detector.onGesture(t)},t.prototype.start=function(){this.canDetectGesture()&&this.eventHandlers.forEach((function(t){return mt(t)}))},t.prototype.stop=function(){this.canDetectGesture()&&this.eventHandlers.forEach((function(t){return St(t)}))},t.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},t.prototype.processEvent=function(t){var e=this;this.logger.tryToExecute("process gesture event",(function(){if(e.detector.isValidTouchEvent(t))switch(t.type){case"touchstart":e.detector.processActionDown(t);break;case"touchmove":e.detector.processActionMove();break;case"touchend":e.detector.processActionUp(t)}}))()},t.isSwipe=function(t){return t.type===Je.FLICK||t.type===Je.DRAG},t}(),Ei=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};function wi(t,e){var i,n,r,o,s=function(){n=null;var e=N.now()-r;o=t.apply(void 0,Ei([e],i)),r=null};return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r||(r=N.now()),n&&window.clearTimeout(n),i=Ei(t),n=window.setTimeout(s,e),o}}var Ci,bi;(bi=Ci||(Ci={})).isEventOnScrollContainer=function(t){return!!(Ft(t)&&function(t){try{if(Ft(t.target))return!0}catch(t){}return!1}(t)&&Wt(t.target)&&null!==t.target.getAttribute("data-cs-scroll-container"))},bi.getScrollContainer=function(){return document.querySelector("[data-cs-scroll-container]")};var Ri;(Ri||(Ri={})).getRelativePosition=function(t){var e=fi(t);if(!(e&&Wt(e)&&Gt(e.getBoundingClientRect)&&Ft(t.pageX)&&Ft(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=e.getBoundingClientRect(),n=t.pageX-i.left-ie.windowOffsetX(),r=t.pageY-i.top-ie.windowOffsetY();e!==document.documentElement&&(n+=e.scrollLeft,r+=e.scrollTop);var o=Math.max(e.scrollWidth,i.width),s=Math.max(e.scrollHeight,i.height);return{xRel:Math.round(n/o*65535),yRel:Math.round(r/s*65535),valid:!0}};var Ti=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ki=function(t){function e(e,i){var n=t.call(this)||this;return n.projectConfiguration=e,n.pathComputation=i,n.supportedEventTypes=[Ze.MOUSEMOVE],n.currentMouseMovePath="",n}return Ti(e,t),e.prototype.isEventTypeSupported=function(t){return-1!==this.supportedEventTypes.indexOf(t)},e.prototype.enhanceAnalysisEvent=function(t,e){if(this.projectConfiguration.mouseMoveHeatmapEnabled){var i=Ri.getRelativePosition(t),n=i.valid,r=i.xRel,o=i.yRel;if(n){var s=this.pathComputation.getTargetPath(t);s!==w.INVALID_ELEMENT&&(e.target=0,e.xRel=r,e.yRel=o,s!==this.currentMouseMovePath?(this.currentMouseMovePath=s,e.targetHeatmap=s):e.targetHeatmap="")}else this.currentMouseMovePath=""}return e},e}(pi),Oi=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Pi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},_i=function(){function t(t,e,i){var n,r,o,s,a,c,u,p=this;this.projectConfiguration=t,this.pathComputation=e,this.selector=i,this.FOCUSABLE_ELEMENTS_SELECTOR="select, select *, input, textarea",this.CHANGEABLE_ELEMENTS_SELECTOR="select, select *, input, textarea",this.HOVERABLE_ELEMENTS_SELECTOR="a, a *, button, button *, select, select *, input, textarea",this.DEBOUNCE_DURATION=150,this.THROTTLE_DURATION=400,this.scrollContainerDimensionSent=!1,this.debouncedScrollEventCallback=wi((function(t,e){return p.scrollListener(t,e)}),this.DEBOUNCE_DURATION),this.debouncedResizeEventCallback=wi((function(t){return p.resizeListener(t)}),this.DEBOUNCE_DURATION),this.throttledMouseMoveCallback=(n=function(t){return p.mouseMoveListener(t)},r=this.THROTTLE_DURATION,s=[],a=null,c=0,u=function(){c=N.now(),a=null,o=n.apply(void 0,s)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=N.now();c||(c=i);var p=r-(i-c);return s=Ke(t),p<=0||p>r?(c=i,o=n.apply(void 0,s),a?(window.clearTimeout(a),a=null):s=[]):a||(a=window.setTimeout(u,p)),o}),this.globalHandlers=[{boundElement:window,type:"resize",listener:function(){return p.debouncedResizeEventCallback()}},{boundElement:document,type:"scroll",listener:function(t){return p.debouncedScrollEventCallback(t)}},{boundElement:window,type:"mousemove",listener:function(t){p.throttledMouseMoveCallback(p.preserveEventForAsyncUse(t))}},{boundElement:document,type:"mousedown",listener:function(t){return p.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return p.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return p.clickListener(t)}}],this.onSelectorHandlers=[{boundElement:document,type:"mouseover",listener:this.selector.on(this.HOVERABLE_ELEMENTS_SELECTOR,(function(t){return p.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.selector.on(this.HOVERABLE_ELEMENTS_SELECTOR,(function(t){return p.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.selector.on(this.FOCUSABLE_ELEMENTS_SELECTOR,(function(t){return p.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.selector.on(this.FOCUSABLE_ELEMENTS_SELECTOR,(function(t){return p.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.selector.on(this.CHANGEABLE_ELEMENTS_SELECTOR,(function(t){return p.changeListener(t)}))}],this.analysisEventsEnhancers=[new li(this.projectConfiguration,this.pathComputation),new ki(this.projectConfiguration,this.pathComputation),new vi(this.projectConfiguration)]}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){this.getSupportedHandlers().forEach((function(t){return mt(t)})),this.resizeListener()},t.prototype.stop=function(){this.getSupportedHandlers().forEach((function(t){return St(t)}))},t.prototype.getSupportedHandlers=function(){return this.selector.isMatchesSelectorSupported()?Pi(this.globalHandlers,this.onSelectorHandlers):(tt.warn("Element.matches is not implemented yet"),this.globalHandlers)},t.prototype.resizeListener=function(t){var e=Ci.getScrollContainer(),i=Wt(e);i&&(this.scrollContainerDimensionSent=!0);var n={type:Ze.RESIZE,x:i?e.clientWidth:ie.windowWidth(),y:i?e.clientHeight:ie.windowHeight()};t&&(n.target=t),this.onEventCallback(n)},t.prototype.scrollListener=function(t,e){var i=Ci.isEventOnScrollContainer(e);!this.scrollContainerDimensionSent&&i&&this.resizeListener();var n=this.buildAnalysisEvent(e,{type:Ze.SCROLL,x:i?e.target.scrollLeft:ie.windowOffsetX(),y:i?e.target.scrollTop:ie.windowOffsetY(),target:t});this.onEventCallback(n)},t.prototype.mouseMoveListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.MOUSEMOVE,x:t.pageX,y:t.pageY});this.onEventCallback(e)},t.prototype.mouseDownListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.MOUSEDOWN,x:t.pageX,y:t.pageY});this.onEventCallbackIfValidTarget(e)},t.prototype.mouseUpListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.MOUSEUP,x:t.pageX,y:t.pageY});this.onEventCallbackIfValidTarget(e)},t.prototype.clickListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.CLICK,x:t.pageX,y:t.pageY});this.onEventCallbackIfValidTarget(e)},t.prototype.mouseOverListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.MOUSEOVER,x:t.pageX,y:t.pageY});this.onEventCallbackIfValidTarget(e)},t.prototype.mouseOutListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.MOUSEOUT,x:t.pageX,y:t.pageY,target:this.pathComputation.getTargetPath(t)});this.onEventCallbackIfValidTarget(e)},t.prototype.focusInListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.FOCUSIN,target:this.pathComputation.getTargetPath(t)});this.onEventCallbackIfValidTarget(e)},t.prototype.focusOutListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.FOCUSOUT,target:this.pathComputation.getTargetPath(t)});this.onEventCallbackIfValidTarget(e)},t.prototype.changeListener=function(t){var e=this.buildAnalysisEvent(t,{type:Ze.CHANGE,target:this.pathComputation.getTargetPath(t)});this.onEventCallbackIfValidTarget(e)},t.prototype.onEventCallbackIfValidTarget=function(t){t.target!==w.INVALID_ELEMENT&&this.onEventCallback(t)},t.prototype.buildAnalysisEvent=function(t,e){return this.analysisEventsEnhancers.filter((function(t){return t.isEventTypeSupported(e.type)})).reduce((function(e,i){return i.enhanceAnalysisEvent(t,e)}),e)},t.prototype.preserveEventForAsyncUse=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},Oi([et("Event handler type: resize")],t.prototype,"resizeListener",null),Oi([et("Event handler type: scroll")],t.prototype,"scrollListener",null),Oi([et("Event handler type: mouseMove")],t.prototype,"mouseMoveListener",null),Oi([et("Event handler type: mouseDown")],t.prototype,"mouseDownListener",null),Oi([et("Event handler type: mouseUp")],t.prototype,"mouseUpListener",null),Oi([et("Event handler type: click")],t.prototype,"clickListener",null),Oi([et("Event handler type: mouseOver")],t.prototype,"mouseOverListener",null),Oi([et("Event handler type: mouseOut")],t.prototype,"mouseOutListener",null),Oi([et("Event handler type: focusIn")],t.prototype,"focusInListener",null),Oi([et("Event handler type: focusOut")],t.prototype,"focusOutListener",null),Oi([et("Event handler type: change")],t.prototype,"changeListener",null),t}(),Ai=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ii=function(){function t(){var t=this;this.MAX_SCROLL_RATE_THRESHOLD=100,this.maxScrollRate=0,this.maxDocumentHeight=ie.documentHeight(),this.maxScrollRateHandler={boundElement:document,type:"scroll",listener:function(e){return t.maxScrollRateListener(e)}}}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){mt(this.maxScrollRateHandler),this.reset()},t.prototype.stop=function(){St(this.maxScrollRateHandler)},t.prototype.reset=function(){var t=Ci.getScrollContainer();if(null===t)this.maxScrollRate=this.currentScrollRate(ie.documentHeight());else{var e=this.computePaddingTop(t);this.maxScrollRate=this.currentScrollRateWithScrollContainer(t,e)}this.onEventCallback()},t.prototype.maxScrollRateListener=function(t){var e,i;if(Ci.isEventOnScrollContainer(t)){var n=t.target,r=this.computePaddingTop(n);e=this.documentHeightWithScrollContainer(n,r),i=this.currentScrollRateWithScrollContainer(n,r)}else e=ie.documentHeight(),i=this.currentScrollRate(e);(i>this.maxScrollRate||e>this.maxDocumentHeight)&&(this.maxScrollRate=i,e>this.maxDocumentHeight&&(this.maxDocumentHeight=e),this.onEventCallback())},t.prototype.currentScrollRate=function(t){var e=Math.round(this.lastPixelLine()/t*100);return Math.min(e,this.MAX_SCROLL_RATE_THRESHOLD)},t.prototype.lastPixelLine=function(){var t=ie.windowHeight();return ie.windowOffsetY()+t},t.prototype.currentScrollRateWithScrollContainer=function(t,e){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.documentHeightWithScrollContainer(t,e),r=Math.round(i/n*100);return Math.min(r,this.MAX_SCROLL_RATE_THRESHOLD)},t.prototype.computePaddingTop=function(t){var e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)},t.prototype.documentHeightWithScrollContainer=function(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e},t.prototype.getRequestParameters=function(){return{sr:""+this.maxScrollRate,mdh:""+this.maxDocumentHeight}},Ai([et("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Ni=function(){return(Ni=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Li=function(){function t(t,e,i,n,r,o,s,a,c,u,p){var h=this;this.configuration=t,this.analysisEventsTracker=e,this.gestureTracker=i,this.maxScrollRateTracker=n,this.performanceTimingMetrics=r,this.analysisEventsBatch=o,this.analysisEventsRequest=s,this.analysisLastEventsRequest=a,this.analysisEventRequestParameters=c,this.sessionRenewer=u,this.recoveryStorage=p,this.eventEmitter=new It,this.visibilityChangeListener=function(){"hidden"===document.visibilityState&&h.sendLastEvents()},this.sendLastEvents=function(){h.analysisEventsBatch.isEmpty()||h.analysisLastEventsRequest.send()}}return t.prototype.init=function(){var t=this;this.analysisEventsTracker.onEvent((function(e){return t.processEvent(e)})),this.gestureTracker.onEvent((function(e){return t.processEvent(e)})),this.maxScrollRateTracker.onEvent((function(){t.analysisEventsBatch.setRequestParametersFromProvider(t.maxScrollRateTracker)})),this.bindRequests()},t.prototype.bindRequests=function(){var t=this;this.analysisEventsRequest.setRequestParametersProviders(this.analysisEventsBatch),this.analysisEventsRequest.before((function(){t.analysisEventsBatch.setRequestParametersFromProvider(t.performanceTimingMetrics),t.analysisEventsBatch.enableCompression()})),this.analysisEventsRequest.after((function(){t.analysisEventsBatch.clearEvents(),t.analysisEventsBatch.setRequestParametersFromProvider(t.analysisEventRequestParameters)})),this.analysisLastEventsRequest.setRequestParametersProviders(this.analysisEventsBatch),this.analysisLastEventsRequest.before((function(){t.analysisEventsBatch.setRequestParametersFromProvider(t.performanceTimingMetrics),t.analysisEventsBatch.disableCompression()})),this.analysisLastEventsRequest.onBeaconSuccess((function(){t.analysisEventsBatch.clearEvents(),t.analysisEventsBatch.setRequestParametersFromProvider(t.analysisEventRequestParameters)})),this.analysisLastEventsRequest.onBeaconFailure((function(){t.saveLastEvents()}))},t.prototype.initStates=function(){this.analysisEventsBatch.setRequestParametersFromProvider(this.analysisEventRequestParameters),this.resetStartTime()},t.prototype.start=function(){this.addLastEventsListeners(),this.analysisEventsTracker.start(),this.maxScrollRateTracker.start(),this.gestureTracker.start()},t.prototype.processEvent=function(t){this.sessionRenewer.isSessionValid()&&(this.analysisEventsBatch.addEvent(this.serializeAnalysisEvent(t)),this.analysisEventsBatch.isFull()&&this.sendEvents(),this.configuration.emitDebugEvents&&this.eventEmitter.emit("analysisEvent",Ni(Ni({},t),{typeName:Ze[t.type]})))},t.prototype.serializeAnalysisEvent=function(t){var e=[t.type,this.getRelativeTime()];return"x"in t&&e.push(t.x),"y"in t&&e.push(t.y),"target"in t&&e.push(t.target),this.configuration.mouseMoveHeatmapEnabled&&("targetHeatmap"in t&&e.push(t.targetHeatmap),"xRel"in t&&e.push(t.xRel),"yRel"in t&&e.push(t.yRel)),"targetLink"in t&&e.push(t.targetLink),"className"in t&&e.push(t.className),"typeAttribute"in t&&e.push(t.typeAttribute),e},t.prototype.sendEvents=function(){this.analysisEventsBatch.isEmpty()||this.analysisEventsRequest.send()},t.prototype.stop=function(){this.removeLastEventsListeners(),this.analysisEventsTracker.stop(),this.maxScrollRateTracker.stop(),this.gestureTracker.stop(),this.analysisEventsBatch.empty()},t.prototype.clearStates=function(){this.sendEvents(),this.maxScrollRateTracker.reset()},t.prototype.resetStartTime=function(){this.startTime=N.now()},t.prototype.getRelativeTime=function(){return N.now()-this.startTime},t.prototype.addLastEventsListeners=function(){this.addVisibilityChangeListener(),this.addPageHideListener(),this.addBlurListener()},t.prototype.removeLastEventsListeners=function(){this.removeVisibilityChangeListener(),this.removePageHideListener(),this.removeBlurListener()},t.prototype.addVisibilityChangeListener=function(){document.addEventListener("visibilitychange",this.visibilityChangeListener)},t.prototype.removeVisibilityChangeListener=function(){document.removeEventListener("visibilitychange",this.visibilityChangeListener)},t.prototype.addPageHideListener=function(){window.addEventListener("pagehide",this.sendLastEvents)},t.prototype.removePageHideListener=function(){window.removeEventListener("pagehide",this.sendLastEvents)},t.prototype.addBlurListener=function(){window.addEventListener("blur",this.sendLastEvents)},t.prototype.removeBlurListener=function(){window.removeEventListener("blur",this.sendLastEvents)},t.prototype.saveLastEvents=function(){try{this.analysisEventsBatch.isEmpty()||this.recoveryStorage.save({events:this.analysisEventsBatch.getEvents(),metadata:this.analysisEventsBatch.getMetadata()})}catch(t){}},t}(),xi=function(){return(xi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Mi=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.events=t,this.requestParameters=e,this.compressed=!0,this.sizeCounter=new Rt(15360)}return t.prototype.addEvent=function(t){this.sizeCounter.add(encodeURIComponent(JSON.stringify(t))),this.events.push(t)},t.prototype.setRequestParametersFromProvider=function(t){var e=t.getRequestParameters();for(var i in e)e.hasOwnProperty(i)&&(this.requestParameters[i]=e[i])},t.prototype.eventsCount=function(){return this.events.length},t.prototype.clearEvents=function(){this.sizeCounter.reset(),this.events=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.sizeCounter.isThresholdReached()||this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.getEvents=function(){return this.events},t.prototype.getMetadata=function(){return this.requestParameters},t.prototype.getRequestParameters=function(){var t=window.JSON.stringify(this.events);return this.compressed?xi(xi({},this.requestParameters),{e:Pt.compressToBase64(t)}):xi(xi({},this.requestParameters),{eu:t})},t.prototype.enableCompression=function(){this.compressed=!0},t.prototype.disableCompression=function(){this.compressed=!1},t}(),Di=function(){function t(t,e){var i=this;this.analysisEventsRecoveryRequest=t,this.recoveryStorage=e,this.visibilityChangeHandler=function(){"visible"===document.visibilityState&&i.sendPersistedRecordings()}}return t.prototype.start=function(){this.sendPersistedRecordings(),this.addVisibilityChangeListener()},t.prototype.stop=function(){this.removeVisibilityChangeListener()},t.prototype.getRecoveryStorage=function(){return this.recoveryStorage},t.prototype.sendPersistedRecordings=function(){var t=this.recoveryStorage.recover();if(null!==t){var e=t,i=e.metadata,n=e.events,r=new Mi(n,i);this.analysisEventsRecoveryRequest.setRequestParametersProviders(r),this.analysisEventsRecoveryRequest.before((function(){r.enableCompression()})),this.analysisEventsRecoveryRequest.send()}},t.prototype.addVisibilityChangeListener=function(){document.addEventListener("visibilitychange",this.visibilityChangeHandler)},t.prototype.removeVisibilityChangeListener=function(){document.removeEventListener("visibilitychange",this.visibilityChangeHandler)},t}();var qi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ui=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.onBeaconSuccessCallbacks=[],n.onBeaconFailureCallbacks=[],n}return qi(e,t),e.prototype.setRequestPayloadProvider=function(t){this.requestPayloadProvider=t},e.prototype.onBeaconSuccess=function(t){this.onBeaconSuccessCallbacks.push(t)},e.prototype.onBeaconFailure=function(t){this.onBeaconFailureCallbacks.push(t)},e.prototype.send=function(){this.beforeRequestCallbacks.forEach((function(t){return t()}));var t=this.retrieveParameters(),e=M.toQuery(t),i=this.retrievePayload();this.sendBeacon(e,i)?this.onBeaconSuccessCallbacks.forEach((function(t){return t()})):this.onBeaconFailureCallbacks.forEach((function(t){return t()})),this.afterRequestCallbacks.forEach((function(t){return t()}))},e.prototype.retrievePayload=function(){return this.requestPayloadProvider?this.requestPayloadProvider.getRequestPayload():""},e.prototype.sendBeacon=function(t,e){return void 0!==navigator.sendBeacon&&navigator.sendBeacon(this.domainUri+"/"+this.path+"?"+t,e)},e}(F),Vi=function(){function t(t,e,i,n,r,o,s){this.configuration=t,this.visitorService=e,this.sessionService=i,this.eventPathComputation=n,this.selector=r,this.commandsService=o,this.sessionRenewer=s}return t.prototype.init=function(){!function(){localStorage.removeItem("csLegacyRecovered");for(var t=[],e=0;e<localStorage.length;e+=1){var i=localStorage.key(e);0===i.indexOf("CSStorageData")&&t.push(i)}t.forEach((function(t){return localStorage.removeItem(t)}))}();var t=new Mi;this.analysisEventsRecovery=this.createRecovery(),this.analysisEventsService=this.createService(t,this.analysisEventsRecovery.getRecoveryStorage()),this.analysisEventsService.init()},t.prototype.onStartTracking=function(){this.analysisEventsRecovery.start(),this.analysisEventsService.start()},t.prototype.onAfterNaturalPageView=function(){this.analysisEventsService.initStates()},t.prototype.onAfterArtificialPageView=function(){this.analysisEventsService.initStates()},t.prototype.onBeforeArtificialPageView=function(){this.analysisEventsService.clearStates()},t.prototype.onBeforeSessionRenewal=function(){this.analysisEventsService.clearStates(),this.analysisEventsService.stop(),this.analysisEventsRecovery.stop()},t.prototype.onOptout=function(){this.analysisEventsService.stop(),this.analysisEventsRecovery.stop()},t.prototype.createService=function(t,e){var i=new ui(window),r=new Ii,o=new _i(this.configuration,this.eventPathComputation,this.selector),s=new gi(this.configuration,this.eventPathComputation,new Si(tt)),a=new W(this.configuration.getTrackerUri(),"events"),c=new Ui(this.configuration.getTrackerUri(),"events"),u=new pe(this.configuration,this.visitorService,this.sessionService,r,i,n);return new Li(this.configuration,o,s,r,i,t,a,c,u,this.sessionRenewer,e)},t.prototype.createRecovery=function(){var t=new W(this.configuration.getTrackerUri(),"events");return new Di(t,new ce("csAnalysisEventsPersisted"))},t}(),zi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ji=function(t){function e(e,i,n){var r=t.call(this)||this;return r.lifeCycleEventsEmitter=e,r.pageViewRequest=i,r.urlService=n,r}return zi(e,t),e.prototype.onStart=function(){this.sendNaturalPageView()},e.prototype.onStop=function(){},e.prototype.triggerArtificialPageView=function(t){this.urlService.overridePath(t),this.isStarted&&this.sendArtificialPageView()},e.prototype.sendNaturalPageView=function(){this.lifeCycleEventsEmitter.emitBeforeNaturalPageView(),this.pageViewRequest.send(),this.lifeCycleEventsEmitter.emitAfterNaturalPageView()},e.prototype.sendArtificialPageView=function(){this.lifeCycleEventsEmitter.emitBeforeArtificialPageView(),this.pageViewRequest.send(),this.lifeCycleEventsEmitter.emitAfterArtificialPageView()},e}(Nt),Hi=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Bi(){return{la:Hi}}var Fi=function(){function t(t){this.pii=t}return t.prototype.getRequestParameters=function(){return{dr:this.get()}},t.prototype.get=function(){return this.pii.anonymize(this.getReferrer())},t.prototype.getReferrer=function(){var t="";try{t=window.top.document.referrer}catch(e){if(window.parent)try{t=window.parent.document.referrer}catch(e){t=""}}return""===t&&(t=document.referrer),t},t}(),Gi=function(){function t(t,e,i,n,r,o,s,a,c){this.configuration=t,this.commandsService=e,this.lifeCycleEventsEmitter=i,this.visitorService=n,this.sessionService=r,this.consentService=o,this.customVariablesService=s,this.pii=a,this.urlService=c}return t.prototype.init=function(){var t=this,e=new W(this.configuration.getTrackerUri(),"pageview");this.pageViewService=new ji(this.lifeCycleEventsEmitter,e,this.urlService),e.setRequestParametersProviders(this.configuration,this.visitorService,this.sessionService,ie,new Fi(this.pii),this.urlService,this.consentService,r,this.customVariablesService,n),this.commandsService.register("trackPageview",(function(e){return t.pageViewService.triggerArtificialPageView(e)})),this.commandsService.register("setPath",(function(e){return t.urlService.overridePath(e)})),this.commandsService.register("setQuery",(function(e){return t.urlService.overrideQuery(e)}))},t.prototype.start=function(){this.pageViewService.start()},t.prototype.onBeforeSessionRenewal=function(){this.pageViewService.stop()},t}(),Wi=function(){function t(t,e){this.pathComputation=t,this.configuration=e}return t.prototype.getTargetPath=function(t){var e=fi(t);return this.pathComputation.getElementPath(e,{dynamicIdRegex:this.configuration.dynamicIdRegex})},t.prototype.getTargetPathAndTargetLink=function(t){var e=fi(t),i=this.pathComputation.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.configuration.dynamicIdRegex}),n=i.path,r=i.firstAnchorParent;return{path:n,targetLink:this.hasValidTargetLink(r)?r.href:""}},t.prototype.hasValidTarget=function(t){var e=fi(t);return this.pathComputation.isValidElement(e)},t.prototype.hasValidTargetLink=function(t){return null!==t&&t.hasAttribute("href")&&!k(t.getAttribute("href"),"#")},t}(),Xi=function(){function t(t){this.pathComputation=t}return t.prototype.on=function(t,e){var i=this;return function(n){i.pathComputation.hasValidTarget(n)&&i.targetMatchesSelector(n,t)&&e(n)}},t.prototype.targetMatchesSelector=function(t,e){var i=fi(t);return ee().call(i,e)},t.prototype.isMatchesSelectorSupported=function(){return!!ee()},t}(),Yi=function(){return(Yi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Ki=function(){function t(t,e,i){this.configuration=t,this.visitorService=e,this.sessionService=i}return t.prototype.getRequestParameters=function(){if(!this.visitorService.doesVisitorExist()||!this.sessionService.doesSessionExist())return{};var t=this.visitorService.getVisitor();return Yi(Yi(Yi({},{v:"9.33.0"}),this.configuration.getRequestParameters()),{uu:t.id,sn:""+t.visitsCount,pn:""+this.sessionService.getSession().pageNumber})},t}(),Ji={SESSION:["visit",2],PAGE:["page",3]},Qi=function(){function t(t,e,i){this.pii=t,this.cookieService=e,this.crossDomainSingleIframeService=i,this.customVariablesPage={}}return t.prototype.set=function(t,e,i,n){var r,o;if(t>0&&Ft(e)&&Ft(i)){var s=this.pii.anonymize(""+(jt(e)?e:String(e))),a=this.pii.anonymize(""+(jt(i)?i:String(i)));if(r=[s.slice(0,20),a.slice(0,255)],o=""!==i,!Bt(n)||Ji.SESSION.indexOf(n)>=0){var c=this.getCustomVariablesSession();o?c[t]=r:delete c[t],$.setRaw(window.JSON.stringify(c),this.cookieService,this.crossDomainSingleIframeService)}(!Bt(n)||Ji.PAGE.indexOf(n)>=0)&&(o?this.customVariablesPage[t]=r:delete this.customVariablesPage[t])}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var e in this.customVariablesPage)this.customVariablesPage.hasOwnProperty(e)&&(t[e]=this.customVariablesPage[e]);if(window.JSON.stringify(t).length<=2)return{};var i={cvars:this.getValidCustomVars(t)};return this.customVariablesPage&&window.JSON.stringify(this.customVariablesPage).length>2&&(i.cvarp=this.getValidCustomVars(this.customVariablesPage)),i},t.prototype.getCustomVariablesSession=function(){var t=$.get(this.cookieService);return null!==t&&Ht(t)?t:{}},t.prototype.getValidCustomVars=function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=parseInt(e,10),n=t[e],r=n[0],o=n[1];a=1,c=20,(!(zt(s=i)&&s>=a&&s<=c)||r.length>20||o.length>255)&&delete t[e]}var s,a,c,u=function(t){var e;for(e in t)return!1;return!0}(t)?[]:t;return window.JSON.stringify(u)},t}(),Zi=function(){function t(t,e,i,n){this.commandsService=t,this.customVariablesService=e,this.crossDomainSingleIframeService=i,this.cookieService=n}return t.prototype.init=function(){var t=this;this.commandsService.register("setCustomVariable",(function(e,i,n,r){t.customVariablesService.set(e,i,n,r)}))},t.prototype.onOptout=function(){$.remove(this.cookieService,this.crossDomainSingleIframeService)},t}(),$i=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},tn=function(){function t(){}return t.prototype.onLoad=function(t){this.onLoadCallback=t},t.prototype.onLoadCallbackExecute=function(){this.onLoadCallback()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.onDocumentLoaded(t)},t.prototype.onDocumentLoaded=function(t){function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e))},$i([et("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),en=function(){function t(t,e,i,n,r){this.cookieDomain=t,this.visitorService=e,this.sessionService=i,this.commandsService=n,this.urlService=r}return t.prototype.init=function(){var t=this;this.commandsService.register("clearSession",(function(){return t.sessionService.removeSession(t.cookieDomain)})),this.commandsService.register("extendSession",(function(){return t.sessionService.extendSessionPeriodically(t.urlService.getUrl())}))},t.prototype.onBeforeNaturalPageView=function(){this.visitorService.createOrUpdateVisitor(),this.sessionService.createOrUpdateSession(this.urlService.getUrl())},t.prototype.onBeforeArtificialPageView=function(){this.visitorService.createOrUpdateVisitor(),this.sessionService.createOrUpdateSession(this.urlService.getUrl())},t.prototype.onOptout=function(){this.visitorService.removeCurrentVisitor(),this.sessionService.removeCurrentSession()},t}(),nn=function(){function t(t){this.sessionService=t}return t.prototype.onSessionExpired=function(t){this.onSessionExpiredCallback=t},t.prototype.isSessionValid=function(){var t=this.sessionService.hasValidSession();return!t&&this.canRenewSession()?(this.lastSessionRenewalTime=N.now(),this.onSessionExpiredCallback(),this.sessionService.hasValidSession()):t},t.prototype.canRenewSession=function(){return!Bt(this.lastSessionRenewalTime)||N.now()-this.lastSessionRenewalTime>6e4},t}(),rn=function(){function t(t,e){this.eMerchandisingRequest=t,this.configuration=e,this.products=[]}return t.prototype.collect=function(){this.collectEMerchandisingData(),this.sendEMerchandisingData()},t.prototype.clearProducts=function(){this.products=[]},t.prototype.getRequestPayload=function(){return JSON.stringify({targetUrl:this.targetUrl,windowWidth:ie.windowWidth(),windowHeight:ie.windowHeight(),products:this.products})},t.prototype.collectEMerchandisingData=function(){var t=this;this.targetUrl=window.location.href,g(document.querySelectorAll("a")).filter((function(t){return t.offsetWidth>0&&t.offsetHeight>0})).forEach((function(e){if(k(e.href,"http")&&t.configuration.hostnames.filter((function(t){return""!==t})).some((function(t){return e.hostname===t||e.hostname.indexOf("."+t)>-1}))){var i={targetPath:w.getElementPath(e,{dynamicIdRegex:t.configuration.dynamicIdRegex}),href:e.href};t.products.push(i)}}))},t.prototype.sendEMerchandisingData=function(){this.eMerchandisingRequest.send()},t}(),on=function(){function t(t,e,i,n){this.configuration=t,this.compressor=e,this.basicRequestParameters=i,this.customVariablesService=n}return t.prototype.init=function(){var t=this.createEMerchandisingPostRequest(this.compressor);t.setRequestParametersProviders(this.basicRequestParameters,this.customVariablesService),this.eMerchandisingService=new rn(t,this.configuration),t.setRequestPayloadProvider(this.eMerchandisingService),t.setRequestHeader({name:"Access-Control-Expose-Headers",value:"Content-compression"}),t.setRequestHeader({name:"Content-type",value:"text/plain; charset=UTF-8"}),t.setRequestHeader({name:"Content-compression",value:"LZString"})},t.prototype.onStartTracking=function(){this.eMerchandisingService.collect()},t.prototype.onBeforeSessionRenewal=function(){this.eMerchandisingService.clearProducts()},t.prototype.onBeforeArtificialPageView=function(){this.eMerchandisingService.clearProducts()},t.prototype.onAfterArtificialPageView=function(){this.eMerchandisingService.collect()},t.prototype.createEMerchandisingPostRequest=function(t){return new yt(this.configuration.getTrackerUri(),"display",t)},t}(),sn=i(0);function an(t){return t.tagDeploymentMode===sn.TagDeploymentMode.DualCollectionReview||t.tagDeploymentMode===sn.TagDeploymentMode.DualCollection}var cn,un=function(){function t(t,e,i,n){this.configuration=t,this.visitorService=e,this.sessionService=i,this.piiMaskingService=n}return t.prototype.init=function(){this.isClicktalePtcLoaded=!1,this.isContentSquareDataCollectionStarted=!1},t.prototype.loadClicktalePtc=function(){!this.isClicktalePtcLoaded&&this.configuration.ptcDomain&&this.configuration.ptcGuid&&this.doLoadClicktalePtc()},t.prototype.getSessionData=function(){var t=this.configuration.projectId,e=this.visitorService.getVisitor();return{projectId:t,userId:e.id,sessionNumber:e.visitsCount,pageNumber:this.sessionService.getSession().pageNumber}},t.prototype.startDataCollection=function(t){this.isContentSquareDataCollectionStarted||an(this.configuration)&&(this.piiMaskingService.initCTPII(),t(),this.isContentSquareDataCollectionStarted=!0)},t.prototype.doLoadClicktalePtc=function(){this.isClicktalePtcLoaded=!0;var t=this.buildScriptElement();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.buildScriptElement=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.configuration.ptcSha512&&this.configuration.ptcSnapshotPath?(t.integrity="sha512-"+this.configuration.ptcSha512,t.src="https://"+this.configuration.ptcDomain+"/"+this.configuration.ptcSnapshotPath+"/ptc.js"):t.src="https://"+this.configuration.ptcDomain+"/ptc/"+this.configuration.ptcGuid+".js",t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(cn||(cn={}));var pn,hn=function(){function t(t,e,i,n,r,o,s){this.configuration=t,this.visitorService=e,this.sessionService=i,this.urlService=n,this.commandsService=r,this.startDataCollectionCallback=o,this.piiMaskingService=s}return t.prototype.init=function(){var t=this;this.clicktaleIntegrationService=new un(this.configuration,this.visitorService,this.sessionService,this.piiMaskingService),this.clicktaleIntegrationService.init(),this.loadPtcForDualCollection(),this.commandsService.register("getSessionData",(function(){return t.clicktaleIntegrationService.getSessionData()})),this.commandsService.register("startDataCollection",(function(){t.clicktaleIntegrationService.startDataCollection(t.startDataCollectionCallback)}))},t.prototype.loadPtcForDualCollection=function(){an(this.configuration)&&this.clicktaleIntegrationService.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.configuration.tagDeploymentMode!==sn.TagDeploymentMode.LoadClicktalePtc||this.sessionService.isReplayRecorded()||this.clicktaleIntegrationService.loadClicktalePtc()},t.prototype.onAfterArtificialPageView=function(){!this.sessionService.isReplayRecorded()&&cn.isRecording()&&this.configuration.tagDeploymentMode===sn.TagDeploymentMode.LoadClicktalePtc&&cn.triggerLogicalPageView(this.urlService.getUrl())},t.prototype.onAfterSessionRenewal=function(){!this.sessionService.isReplayRecorded()&&cn.isRecording()&&cn.triggerLogicalPageView(this.urlService.getUrl())},t.prototype.onOptout=function(){cn.isRecording()&&cn.stopRecording()},t}(),ln=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fn=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.configuration=e,o.pageEventRequest=i,o.compressor=n,o.customEventsEmitter=r,o.pageEventsQueue=[],o.etrQueue=[],o}return ln(e,t),e.prototype.onStart=function(){var t=this;this.pageEventsQueue.forEach((function(e){return t.trackPageEvent(e)})),this.pageEventsQueue=[],this.etrQueue.forEach((function(e){return t.trackEventTriggerRecording(e)})),this.etrQueue=[]},e.prototype.onStop=function(){},e.prototype.trackPageEvent=function(t){this.isStarted?e.isValidEventName(t)&&(this.customEventsEmitter.emitPageEvent(t),this.pageEventRequestParameter={eventName:t,isETR:!1},this.sendPageEvent(),this.configuration.tagDeploymentMode===sn.TagDeploymentMode.LoadClicktalePtc&&cn.sendPageEvent(t)):this.pageEventsQueue.push(t)},e.prototype.trackEventTriggerRecording=function(t){var i;this.isStarted?e.isValidEventName(t)&&(an(i=this.configuration)||i.tagDeploymentMode===sn.TagDeploymentMode.LoadClicktalePtc)&&(this.customEventsEmitter.emitEventTriggerRecording(t),this.pageEventRequestParameter={eventName:t,isETR:!0},this.sendPageEvent(),this.configuration.tagDeploymentMode===sn.TagDeploymentMode.LoadClicktalePtc&&cn.sendEventTriggerRecording(t)):this.etrQueue.push(t)},e.prototype.getRequestParameters=function(){return{value:this.compressor.compressSync(this.pageEventRequestParameter.eventName),isETR:""+!!this.pageEventRequestParameter.isETR}},e.prototype.sendPageEvent=function(){this.pageEventRequest.send()},e.isValidEventName=function(t){return jt(t)&&!!t.trim()},e}(Nt),dn=function(){function t(t,e,i,n,r){this.configuration=t,this.commandsService=e,this.compressor=i,this.basicParameters=n,this.customEventsEmitter=r}return t.prototype.init=function(){var t=this,e=new W(this.configuration.getTrackerUri(),"pageEvent");this.pageEventService=new fn(this.configuration,e,this.compressor,this.customEventsEmitter),e.setRequestParametersProviders(this.pageEventService,this.basicParameters),this.commandsService.register("trackPageEvent",(function(e){t.pageEventService.trackPageEvent(e)})),this.commandsService.register("trackEventTriggerRecording",(function(e){t.pageEventService.trackEventTriggerRecording(e)}))},t.prototype.onStartTracking=function(){this.pageEventService.start()},t}(),vn=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},gn=ee(),yn=[".ctHidden, textarea"],mn=function(){function t(t){this.configuration=t,this.piiMaskSelectors={PIISelectors:[],Attributes:[]},an(this.configuration)||this.piiMaskSelectors.PIISelectors.push("[data-cs-mask]")}return t.prototype.setPIISelectors=function(t){var e;!an(this.configuration)&&t&&((null===(e=t.PIISelectors)||void 0===e?void 0:e.length)&&(this.piiMaskSelectors.PIISelectors=vn(this.piiMaskSelectors.PIISelectors,t.PIISelectors)),this.piiMaskSelectors.Attributes=vn(t.Attributes)||[])},t.prototype.initCTPII=function(){var t,e,i=this;(null===(e=null===(t=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===t?void 0:t.DOM)||void 0===e?void 0:e.PII)&&(this.piiMaskSelectors.PIISelectors=vn(yn,window.ClickTaleSettings.DOM.PII.Text),window.ClickTaleSettings.DOM.PII.Attributes.map((function(t){i.piiMaskSelectors.Attributes.push({selector:t.rule,attrName:t.attr})})))},t.prototype.isElementMatchingSelectors=function(t,e){return e.some((function(e){return gn.call(t,e)}))},t.prototype.isElementMatchingAttributes=function(t,e,i){return i.some((function(i){return t.hasAttribute(e)&&i.attrName.indexOf(e)>-1&&gn.call(t,i.selector)}))},t.prototype.checkAttributeMatch=function(t,e){return 0!==this.piiMaskSelectors.Attributes.length&&this.isElementMatchingAttributes(t,e,this.piiMaskSelectors.Attributes)},t.prototype.checkNodeMatch=function(t){return this.isElementMatchingSelectors(t,this.piiMaskSelectors.PIISelectors)},t}(),Sn=function(){function t(t){this.commandsService=t}return t.prototype.init=function(){this.commandsService.register("logSnippetError",(function(t,e){jt(t)&&jt(e)&&tt.error(e,"snippet-"+t)}))},t}(),En=function(){function t(t,e,i,n,r,o,s,a,c,u,p,h,l,f,d,v,g){var y=this;this.visitorService=t,this.sessionService=e,this.lifeCycleEventsEmitter=i,this.commandsService=n,this.commandsModule=r,this.configuration=o,this.optoutModule=s,this.optoutService=a,this.consentModule=c,this.consentService=u,this.pii=p,this.cookieService=h,this.crossDomainSingleIframeService=l,this.urlService=f,this.projectConfigurationModule=d,this.customEventsEmitter=v,this.javaScriptErrorsTracker=g,this.startDataCollection=function(){y.pageViewModule.start(),y.loadTracker.start()}}return t.prototype.start=function(){var t=this;if(this.optoutModule.init(),this.optoutService.init(),!this.optoutService.isActive()){var e=new nn(this.sessionService),i=new Wi(w,this.configuration),n=new Xi(i),r=new At((function(t){tt.warn(t)})),o=new Ki(this.configuration,this.visitorService,this.sessionService),s=new Vi(this.configuration,this.visitorService,this.sessionService,i,n,this.commandsService,e),a=new ii(this.commandsService,this.sessionService,this.configuration,o,r,this.pii),c=new Ge(this.visitorService,this.sessionService,this.commandsService),u=new ci(this.configuration,this.visitorService,this.sessionService,this.commandsService,this.pii,e,this.urlService),p=new Qi(this.pii,this.cookieService,this.crossDomainSingleIframeService),h=new Zi(this.commandsService,p,this.crossDomainSingleIframeService,this.cookieService);this.pageViewModule=new Gi(this.configuration,this.commandsService,this.lifeCycleEventsEmitter,this.visitorService,this.sessionService,this.consentService,p,this.pii,this.urlService);var l=new en(this.cookieService.getDomain(),this.visitorService,this.sessionService,this.commandsService,this.urlService),f=new mn(this.configuration),d=new hn(this.configuration,this.visitorService,this.sessionService,this.urlService,this.commandsService,this.startDataCollection,f),v=new dn(this.configuration,this.commandsService,r,o,this.customEventsEmitter),g=new Sn(this.commandsService);if(this.loadTracker=new tn,this.consentModule.init(),c.init(),a.init(),u.init(),h.init(),this.pageViewModule.init(),l.init(),d.init(),v.init(),this.projectConfigurationModule.init(),g.init(),this.lifeCycleEventsEmitter.addListeners(l,this.commandsModule,s,this.consentModule,c,h,this.pageViewModule,d,v,a),je.isSupported()){var y=new je(this.sessionService,this.configuration,r,n,this.consentService,o,this.commandsService,this.pii,e,this.urlService,f,this.javaScriptErrorsTracker);y.init(),this.lifeCycleEventsEmitter.addListeners(y),this.customEventsEmitter.addListeners(y)}if(this.configuration.eMerchandisingEnabled){var m=new on(this.configuration,r,o,p);m.init(),this.lifeCycleEventsEmitter.addListeners(m)}s.init(),e.onSessionExpired((function(){t.lifeCycleEventsEmitter.emitBeforeSessionRenewal(),t.doStart(!0),t.lifeCycleEventsEmitter.emitAfterSessionRenewal()})),this.doStart()}},t.prototype.doStart=function(t){var e=this;void 0===t&&(t=!1),this.commandsService.start(),this.loadTracker.onLoad((function(){e.lifeCycleEventsEmitter.emitStartTracking()})),an(this.configuration)&&!t||this.startDataCollection()},t}(),wn=function(){function t(t,e,i,n,r,o,s,a){this.configuration=t,this.visitorService=e,this.exclusionService=i,this.outdatedState=n,this.allowSubdomainsChange=r,this.crossDomainService=o,this.crossDomainSingleIframeService=s,this.forceInclusionService=a}return t.prototype.compute=function(t){var e=this;this.configuration.crossDomainTracking?this.configuration.crossDomainSingleIframeTracking?this.crossDomainSingleIframeService.start((function(){return e.computeState(t)})):this.crossDomainService.applyUpToDate((function(){return e.computeState(t)})):this.computeState(t)},t.prototype.computeState=function(t){this.allowSubdomainsChange.handle(),this.outdatedState.clear(),this.isIncluded()?(this.outdatedState.restoreClearedVisitor(),t(!0)):(this.exclusionService.exclude(this.configuration),t(!1))},t.prototype.isIncluded=function(){var t=P(this.configuration.sampleRate);return this.forceInclusionService.isForceIncluded()||!this.exclusionService.isExcluded()&&this.visitorService.doesVisitorExist()||!this.exclusionService.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=function(t){for(var e=0,i=0;i<t.length;i+=1)e=t.charCodeAt(i)+(e<<6)+(e<<16)-e;return Math.abs(e)}(navigator.userAgent+navigator.language+navigator.platform).toString(16).slice(-4),e=(new Date).getTime();return"xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:7&i|8).toString(16)})).replace("hhhh",t)}}(pn||(pn={}));var Cn,bn,Rn,Tn,kn=function(){function t(t,e,i,n){this.configuration=t,this.sessionService=e,this.cookieService=i,this.crossDomainSingleIframeService=n}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t?(t=this.createVisitor(),this.sessionService.removeCurrentSession()):t=this.manageSameSiteForVisitor(t),this.updateVisitor(t),this.setVisitor(t)},t.prototype.createVisitor=function(){return{id:pn.generate(),visitsCount:0,appliedTrackingDraw:this.configuration.lastTrackingDraw,creationTimestamp:R(),lastVisitTimestamp:0,hitTimestamp:0,expires:N.now()+this.configuration.visitorCookieTimeout,sameSite:this.cookieService.getSameSiteFlag(),secured:this.cookieService.getSecureFlag()}},t.prototype.updateVisitor=function(t){var e=R();this.sessionService.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.configuration.lastTrackingDraw},t.prototype.getRequestParameters=function(){if(this.doesVisitorExist()){var t=this.getVisitor();return{uu:t.id,sn:""+t.visitsCount,lv:""+t.lastVisitTimestamp,lhd:""+t.lastVisitTimestamp,hd:""+t.hitTimestamp}}return{}},t.prototype.getVisitor=function(){return it.get(this.cookieService)},t.prototype.setVisitor=function(t){this.setCookieFlagsFromCookieService(t),it.set(t,this.cookieService,this.crossDomainSingleIframeService)},t.prototype.doesVisitorExist=function(){return null!==it.get(this.cookieService)},t.prototype.removeCurrentVisitor=function(){this.removeVisitor(this.cookieService.getDomain())},t.prototype.removeVisitor=function(t){var e=t||this.cookieService.getDomain();it.remove(e,this.cookieService,this.crossDomainSingleIframeService)},t.prototype.visitorHasSameSiteDefined=function(t){return Bt(t.sameSite)&&Bt(t.secured)},t.prototype.setCookieFlagsFromCookieService=function(t){return t.sameSite=this.cookieService.getSameSiteFlag(),t.secured=this.cookieService.getSecureFlag(),t},t.prototype.manageSameSiteForVisitor=function(t){if(this.configuration.crossDomainTracking&&!this.visitorHasSameSiteDefined(t)){var e=this.createVisitor();return this.sessionService.removeCurrentSession(),e}return t},t}(),On=function(){function t(t,e,i,n,r){this.configuration=t,this.sessionStorage=e,this.forceInclusionService=i,this.cookieService=n,this.crossDomainSingleIframeService=r,this.triggerSessionReplayOngoing=!1,this.extendedSessionTimeoutId=null,this.sessionExtensionCount=0}return t.prototype.upgradeDeprecatedRecordingStateInCookie=function(t){if("0"===t.recordingState||"2"===t.recordingState){"0"===t.recordingState?t.recordingState="1":"2"===t.recordingState&&(t.recordingState="3");var e=this.sessionStorage.toString(t);this.cookieService.setWithCache("_cs_s",e,18e5),this.crossDomainSingleIframeService.setCookie("_cs_s",e,18e5)}},t.prototype.setDynamicVariablesService=function(t){this.dynamicVariablesService=t},t.prototype.createOrUpdateSession=function(t){void 0===t&&(t=window.location.href),this.stopSessionExtension(),this.beginSession=N.now(),this.sessionExtensionCount=0;var e=this.getSessionWithoutCache();null===e?e=this.buildSessionObject():this.upgradeDeprecatedRecordingStateInCookie(e),this.incrementSessionPageNumber(e),this.setSession(e),this.setTriggerSessionReplay(e,t)},t.prototype.buildSessionObject=function(){return{pageNumber:0,recordingState:this.computeRecordingState()}},t.prototype.setTriggerSessionReplay=function(t,e){this.configuration.triggerSessionReplayEnabled&&"3"!==t.recordingState&&(this.triggerSessionReplayOngoing=this.doesUrlTriggerSessionReplay(e,this.configuration.triggerSessionReplayRegex))},t.prototype.createExtendedSession=function(t){var e=this.buildSessionObject();return this.incrementSessionPageNumber(e),this.setTriggerSessionReplay(e,t),e},t.prototype.computeRecordingState=function(){return this.isCompressionSupported()?this.forceInclusionService.isForceReplayRecorded()?"3":this.computeRecordingType(this.configuration.replayRecordingRate):"1"},t.prototype.isCompressionSupported=function(){var t=new At(T),e=t.isSupported();return t.terminateWorker(),e},t.prototype.computeRecordingType=function(t){return _()<t&&je.isSupported()?"3":"1"},t.prototype.doesUrlTriggerSessionReplay=function(t,e){return!!e&&e.test(t)},t.prototype.incrementSessionPageNumber=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){return this.doesSessionExist()&&("3"===this.getSession().recordingState||this.triggerSessionReplayOngoing)},t.prototype.removeCurrentSession=function(){this.removeSession(this.cookieService.getDomain())},t.prototype.getRequestParameters=function(){if(this.doesSessionExist()){var t=this.getSession(),e=t.recordingState;return this.triggerSessionReplayOngoing&&(e="5"),{re:e,pn:""+t.pageNumber}}return{}},t.prototype.getSession=function(){return this.sessionStorage.get()},t.prototype.getSessionWithoutCache=function(){return this.sessionStorage.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.sessionStorage.get()},t.prototype.setSession=function(t,e){void 0===e&&(e=18e5),this.sessionStorage.set(t,e)},t.prototype.removeSession=function(t){this.sessionStorage.remove(t)},t.prototype.hasValidSession=function(){var t=this.sessionStorage.getRawSession();return this.sessionStorage.isValid(t)},t.prototype.extendSessionPeriodically=function(t){this.extendedSessionTimeoutId||this.extendSession(t)},t.prototype.extendSession=function(t){if(this.hasReachedMaxDuration())this.stopSessionExtension();else{var e=this.getSession();null===e&&(e=this.createExtendedSession(t)),this.setSession(e,174e4),this.sendDynamicVar(),this.scheduleNextSessionUpdate(t)}},t.prototype.scheduleNextSessionUpdate=function(t){var e=this;this.extendedSessionTimeoutId=window.setTimeout((function(){e.extendSession(t)}),174e4)},t.prototype.hasReachedMaxDuration=function(){return 1434e4-(N.now()+18e5-this.beginSession)<0},t.prototype.stopSessionExtension=function(){this.extendedSessionTimeoutId&&(window.clearTimeout(this.extendedSessionTimeoutId),this.extendedSessionTimeoutId=null)},t.prototype.sendDynamicVar=function(){this.sessionExtensionCount+=1,this.dynamicVariablesService.trackDynamicVariable("session_expiry_update",this.sessionExtensionCount)},t}(),Pn=function(){function t(t,e,i){this.configuration=t,this.visitorService=e,this.exclusionService=i}return t.prototype.clear=function(){this.isVisitorOutdated()&&(this.savedVisitor=this.visitorService.getVisitor(),this.visitorService.removeVisitor()),this.isExclusionOutdated()&&this.exclusionService.removeExclusion()},t.prototype.isVisitorOutdated=function(){return this.visitorService.doesVisitorExist()&&this.visitorService.getVisitor().appliedTrackingDraw!==this.configuration.lastTrackingDraw},t.prototype.isExclusionOutdated=function(){return this.exclusionService.getAppliedTrackingDraw()!==this.configuration.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.savedVisitor&&this.visitorService.setVisitor(this.savedVisitor)},t}();!function(t){function e(t){var e=new RegExp("(^|;)[ ]*"+t+"=([^;]*)").exec(document.cookie);return e?decodeURIComponent(e[2]):null}function i(e,i,r,o,s,a){var c=encodeURIComponent(""+i),u=r===t.CURRENT_DOMAIN?void 0:r,p=n(o),h=e+"="+c+(p?";expires="+p.toUTCString():"")+";path=/"+(Ft(u)?";domain="+u:"");return Bt(s)&&s!==Rn.NotSet&&(h=h+";SameSite="+s),Bt(a)&&a===Tn.Yes&&(h+=";Secure"),document.cookie=h,!0}function n(t){return Vt(t)?new Date(N.now()+t):t}function r(t,n){e(t)&&i(t,"",n,-1),e(t)&&i(t,"",n,-1,Rn.None,Tn.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=e,t.set=i,t.toExpireDate=n,t.remove=r,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,n){for(var o=window.location.hostname.split("."),s=o.pop();o.length&&!e("_cs_root-domain");)i("_cs_root-domain","1",s=[o.pop(),s].join("."),void 0,t,n);return r("_cs_root-domain",s),s}}(Cn||(Cn={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&window.navigator.vendor.indexOf("Apple")>-1&&window.navigator.appVersion&&window.navigator.appVersion.indexOf("Version/12.")>-1}}(bn||(bn={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Rn||(Rn={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(Tn||(Tn={}));var _n,An=function(){function t(t,e,i){this.configuration=t,this.urlService=e,this.cookieChecker=i,this.supportsSameSite=!1,this.sameSiteFlag=Rn.NotSet,this.secureFlag=Tn.No,this.caches={}}return t.prototype.getSameSiteFlag=function(){return this.sameSiteFlag},t.prototype.getSecureFlag=function(){return this.secureFlag},t.prototype.getDomain=function(){return this.domain},t.prototype.getRootDomain=function(){return this.rootDomain},t.prototype.init=function(){this.initSameSiteSupport(),this.initSameSiteFlag(),this.initSecureFlag(),this.initDomain()},t.prototype.initSameSiteSupport=function(){if(bn.browserIsSafariV12())this.supportsSameSite=!1;else{var e="https:"===this.urlService.getUrlProtocol()?Tn.Yes:Tn.No,i=this.cookieChecker.isSameSiteNoneSecureNeeded()&&e===Tn.Yes?Rn.None:Rn.Lax;Cn.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,i,e),Cn.get(t.COOKIE_TEST_FOR_SAME_SITE)?(this.supportsSameSite=!0,Cn.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN)):this.supportsSameSite=!1}},t.prototype.initSameSiteFlag=function(){this.isSameSiteSupported()&&("http:"===this.urlService.getUrlProtocol()&&(this.sameSiteFlag=Rn.Lax),this.configuration.crossDomainTracking&&"https:"===this.urlService.getUrlProtocol()||this.cookieChecker.isSameSiteNoneSecureNeeded()&&"https:"===this.urlService.getUrlProtocol()?this.sameSiteFlag=Rn.None:this.configuration.crossDomainTracking||"https:"!==this.urlService.getUrlProtocol()||(this.sameSiteFlag=Rn.Lax))},t.prototype.initSecureFlag=function(){this.configuration.secureCookiesEnabled&&"https:"===this.urlService.getUrlProtocol()?this.secureFlag=Tn.Yes:(this.configuration.crossDomainTracking&&this.isSameSiteSupported()&&"https:"===this.urlService.getUrlProtocol()&&(this.secureFlag=Tn.Yes),this.cookieChecker.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported()&&"https:"===this.urlService.getUrlProtocol()&&(this.secureFlag=Tn.Yes))},t.prototype.isSameSiteSupported=function(){return this.supportsSameSite},t.prototype.set=function(t,e,i){var n=Cn.toExpireDate(i);Cn.set(t,e,this.domain,n,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.setWithCache=function(t,e,i){this.set(t,e,i),this.caches[t]={value:e,expires:N.now()+i}},t.prototype.getWithCache=function(t){var e=this.caches[t];return e&&N.now()<=e.expires?e.value:this.get(t)},t.prototype.get=function(t){var e=new RegExp("(^|;)[ ]*"+t+"=([^;]*)").exec(document.cookie);return e?decodeURIComponent(e[2]):null},t.prototype.delete=function(t,e){var i=e||this.domain;Cn.remove(t,i),delete this.caches[t]},t.prototype.initDomain=function(){var t=this.cookieChecker.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Rn.None:void 0,i=t?Tn.Yes:void 0;this.rootDomain=Cn.getRootDomain(e,i),this.domain=this.configuration.allowSubdomains?this.rootDomain:Cn.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),In=function(){function t(t,e,i,n){this.configuration=t,this.cookieService=e,this.visitorService=i,this.sessionService=n}return t.prototype.handle=function(){this.handleVisitor(),this.handleSession()},t.prototype.handleVisitor=function(){var t=this.visitorService.getVisitor();t&&(this.configuration.allowSubdomains?this.visitorService.removeVisitor(An.CURRENT_DOMAIN):this.visitorService.removeVisitor(this.cookieService.getRootDomain()),this.visitorService.setVisitor(t))},t.prototype.handleSession=function(){var t=this.sessionService.getSessionWithoutCache();t&&(this.configuration.allowSubdomains?this.sessionService.removeSession(An.CURRENT_DOMAIN):this.sessionService.removeSession(this.cookieService.getRootDomain()),this.sessionService.setSession(t))},t}(),Nn=function(){function t(){this.listeners=[]}return t.prototype.addListeners=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];(t=this.listeners).push.apply(t,e)},t}(),Ln=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ln(e,t),e.prototype.emitBeforeNaturalPageView=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},e.prototype.emitAfterNaturalPageView=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},e.prototype.emitInitTracking=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onInitTracking&&i.onInitTracking()}},e.prototype.emitStartTracking=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onStartTracking&&i.onStartTracking()}},e.prototype.emitBeforeArtificialPageView=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},e.prototype.emitAfterArtificialPageView=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},e.prototype.emitBeforeSessionRenewal=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},e.prototype.emitAfterSessionRenewal=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},e.prototype.emitOptout=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onOptout&&i.onOptout()}},e.prototype.emitConsentGranted=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onConsentGranted&&i.onConsentGranted()}},e.prototype.emitConsentWithdrawn=function(){for(var t=0,e=this.listeners;t<e.length;t++){var i=e[t];i.onConsentWithdrawn&&i.onConsentWithdrawn()}},e}(Nn);!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(_n||(_n={}));var Mn,Dn=function(){function t(t){this.cookieService=t}return t.prototype.get=function(){var t=this.cookieService.get("_cs_c");return null===t?t:Number(t)},t.prototype.set=function(t){this.cookieService.set("_cs_c",String(t),34164e6)},t.prototype.remove=function(t){this.cookieService.delete("_cs_c",t)},t}(),qn=function(){function t(t,e){this.commandsService=t,this.service=e}return t.prototype.init=function(){this.service.handleSubdomainChange(),this.service.setInitialConsent(),this.registerCommands()},t.prototype.registerCommands=function(){var t=this;this.commandsService.register("trackConsentGranted",(function(){t.service.grantConsent()})),this.commandsService.register("trackConsentWithdrawn",(function(){t.service.withdrawConsent()}))},t.prototype.onOptout=function(){this.service.removeCurrentConsent()},t}(),Un=function(){function t(t,e,i,n){this.configuration=t,this.storage=e,this.lifeCycleEventsEmitter=i,this.cookieService=n}return t.prototype.setInitialConsent=function(){var t=this.storage.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefault()},t.prototype.hasConsentRequiredChanged=function(t){var e=this.configuration.consentRequired;return e&&t===_n.NOT_REQUIRED||!e&&t!==_n.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.configuration.allowSubdomains?this.storage.remove(An.CURRENT_DOMAIN):this.storage.remove(this.cookieService.getRootDomain())},t.prototype.setDefault=function(){var t=this.configuration.consentRequired?_n.NOT_EXPRESSED:_n.NOT_REQUIRED;this.storage.set(t)},t.prototype.grantConsent=function(){this.configuration.consentRequired&&(this.storage.set(_n.GRANTED),this.lifeCycleEventsEmitter.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.configuration.consentRequired&&(this.storage.set(_n.WITHDRAWN),this.lifeCycleEventsEmitter.emitConsentWithdrawn())},t.prototype.removeCurrentConsent=function(){var t=this.cookieService.getDomain();this.storage.remove(t)},t.prototype.isAllowedByConsent=function(){return!this.configuration.consentRequired||this.storage.get()===_n.GRANTED},t.prototype.getRequestParameters=function(){return{uc:""+this.storage.get()}},t}(),Vn=function(){function t(t,e,i,n,r,o,s){this.lifeCycleEventsEmitter=t,this.commandsService=e,this.commandsModule=i,this.optoutModule=n,this.optoutService=r,this.exclusionModule=o,this.consentModule=s}return t.prototype.start=function(){this.lifeCycleEventsEmitter.addListeners(this.exclusionModule,this.consentModule,this.commandsModule),this.consentModule.init(),this.optoutModule.init(),this.optoutService.init(),this.optoutService.isActive()||this.commandsService.start()},t}(),zn=function(){function t(t){this.service=t}return t.prototype.onOptout=function(){this.service.removeExclusion()},t}(),jn=function(){function t(t,e){this.location=t,this.cookieService=e}return t.prototype.isForceIncluded=function(){return this.hasForceInclusionCookie()||this.hasForceInclusionInURL()},t.prototype.isForceReplayRecorded=function(){return this.hasForceInclusionCookieValue("3")||this.hasForceInclusionValueInURL("3")},t.prototype.hasForceInclusionCookie=function(){return null!==this.cookieService.get("_cs_inc")},t.prototype.hasForceInclusionCookieValue=function(t){return this.cookieService.get("_cs_inc")===t},t.prototype.hasForceInclusionInURL=function(){return this.location.href.indexOf("_cs_inc")>0},t.prototype.hasForceInclusionValueInURL=function(t){return this.location.href.indexOf("_cs_inc="+t)>0},t}(),Hn=function(){return(Hn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Bn=function(){function t(){this.metrics={}}return t.prototype.start=function(t,e){void 0===e&&(e=N.now());var i=this.metrics[t];this.metrics[t]=i&&i.startedAt?i:Hn(Hn({},i),{startedAt:e})},t.prototype.stop=function(t,e){void 0===e&&(e=N.now());var i=this.metrics[t];this.metrics[t]=i&&i.stoppedAt?i:Hn(Hn({},i),{stoppedAt:e}),this.onStopCallback(t,this.metrics[t])},t.prototype.onStop=function(t){this.onStopCallback=t},t}(),Fn=function(){function t(){}return t.prototype.getRequestParameters=function(){var t=window.location;return{pr:t.protocol,ho:t.hostname,pa:t.pathname,qu:t.search,ha:t.hash}},t}(),Gn=function(){function t(t,e){this.configuration=t,this.request=e,this.isLoggingActive=!1}return t.prototype.init=function(){this.isLoggingActive=P(this.configuration.metricRate)},t.prototype.getRequestParameters=function(){return{a:"uxam",mk:this.metricKey,mv:""+this.metricValue}},t.prototype.logMetric=function(t,e){this.metricKey=t,this.metricValue=e.stoppedAt-e.startedAt,this.sendLog()},t.prototype.sendLog=function(){this.isLoggingActive&&this.request.send()},t}();!function(t){t.TIME_BEFORE_EXECUTION="TimeBeforeExecution",t.PAGE_LOAD="PageLoad"}(Mn||(Mn={}));var Wn,Xn=function(){function t(t,e,i){this.service=e,this.pii=i,this.locationRequestParameters=new Fn,this.basicLogRequestParameters=new Z(t,this.pii),this.request=new W(t.getLoggerUri()),this.logger=new Gn(t,this.request)}return t.prototype.init=function(){var t=this;this.request.setRequestParametersProviders(this.basicLogRequestParameters,this.locationRequestParameters),this.logger.init(),this.service.onStop((function(e,i){t.logger.logMetric(e,i)})),this.recordInitialMetrics()},t.prototype.recordInitialMetrics=function(){this.isSupported()&&(this.service.start(Mn.PAGE_LOAD,window.performance.timing.navigationStart),this.service.stop(Mn.PAGE_LOAD,window.performance.timing.domContentLoadedEventEnd),this.service.start(Mn.TIME_BEFORE_EXECUTION,window.performance.timing.domContentLoadedEventEnd),this.service.stop(Mn.TIME_BEFORE_EXECUTION))},t.prototype.isSupported=function(){return window.performance&&window.performance.timing},t}(),Yn=function(){function t(t,e,i){this.lifeCycleEventsEmitter=t,this.location=e,this.cookieService=i}return t.prototype.init=function(){!this.isActive()&&this.hasOptoutInURL()&&this.activate()},t.prototype.isActive=function(){return"1"===this.cookieService.get("_cs_optout")},t.prototype.activate=function(){this.lifeCycleEventsEmitter.emitOptout(),this.cookieService.set("_cs_optout","1",34164e6)},t.prototype.hasOptoutInURL=function(){return this.location.href.indexOf("_cs_optout")>0},t}(),Kn=function(){function t(t,e){this.commandsService=t,this.optoutService=e}return t.prototype.init=function(){var t=this;this.commandsService.register("optout",(function(){t.optoutService.activate()}))},t}();function Jn(t,e){return e.visitor.visitsCount!==t.visitor.visitsCount?e.visitor.visitsCount-t.visitor.visitsCount:t.session?e.session?e.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,e){var i=function(t,e){return t.filter((function(t){return t.exclusion===e}))[0]}(t,e),n=function(t,e){return t.filter((function(t){return function(t,e){return t.visitor&&t.visitor.appliedTrackingDraw===e}(t,e)})).sort(Jn)[0]}(t,e);return i||n}}(Wn||(Wn={}));var Qn=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},Zn=function(){function t(t,e,i){this.configuration=t,this.currentDomainState=e,this.otherDomainStates=i}return t.prototype.applyUpToDate=function(t){var e=this;this.otherDomainStates.retrieve(this.configuration.hostnames,(function(i){var n=Qn([e.currentDomainState.get()],i),r=Wn.select(n,e.configuration.lastTrackingDraw);e.currentDomainState.apply(r),t()}))},t}(),$n=function(){function t(t){this.commandsService=t}return t.prototype.onOptout=function(){this.commandsService.stop()},t.prototype.onBeforeSessionRenewal=function(){this.commandsService.stop()},t}();var tr,er=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ir=function(){function t(){this.registry={}}return t.prototype.register=function(t,e){this.registry[t]=e,this.registry},t.prototype.start=function(){this.applyPending(),this.enableImmediateApplication()},t.prototype.stop=function(){window._uxa=[]},t.prototype.applyPending=function(){var t=this;window._uxa.forEach((function(e){var i=e[0],n=e.slice(1);return t.apply(i,n)}))},t.prototype.enableImmediateApplication=function(){var t=this;window._uxa={push:function(e){var i=e[0],n=e.slice(1);return t.apply(i,n)}}},t.prototype.apply=function(t,e){var i;if(this.registry[t])return(i=this.registry)[t].apply(i,e)},er([et("Commands.apply")],t.prototype,"apply",null),t}(),nr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},rr=function(){function t(){var t=this;this.eventHandler={boundElement:document,type:"securitypolicyviolation",listener:function(e){return t.securityPolicyViolationListener(e)}}}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){mt(this.eventHandler)},t.prototype.stop=function(){St(this.eventHandler)},t.prototype.securityErrorIsRelevant=function(e){return e&&e.sourceFile&&0!==e.sourceFile.length&&t.whilelistDomains.some((function(t){return e.sourceFile.indexOf(t)>0}))},t.prototype.securityPolicyViolationListener=function(t){this.securityErrorIsRelevant(t)&&this.onEventCallback({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.whilelistDomains=["contentsquare","localhost","website.com/build/e2e"],nr([et("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),or=function(){function t(t){this.contentSecurityPolicyErrorsTracker=t}return t.prototype.init=function(){var t=this;this.contentSecurityPolicyErrorsTracker.onEvent((function(e){return t.processEvent(e)}))},t.prototype.start=function(){this.contentSecurityPolicyErrorsTracker.start()},t.prototype.stop=function(){this.contentSecurityPolicyErrorsTracker.stop()},t.prototype.processEvent=function(t){var e="Content Security Policy error. Violated directive: "+t.violatedDirective+" - Source file: "+t.sourceFile;tt.warn(e)},t}(),sr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ar=function(t){function e(e,i,n){var r=t.call(this)||this;return r.javaScriptErrorsTracker=e,r.javaScriptErrorsRequest=i,r.basicRequestParameters=n,r.javaScriptErrorsBatch=[],r.javaScriptErrorsCount=0,r}return sr(e,t),e.prototype.init=function(){var t=this;this.javaScriptErrorsTracker.onEvent((function(e){return t.processEvent(e)})),this.bindRequest()},e.prototype.initStates=function(){this.startTime=N.now(),this.javaScriptErrorsBatch=[],this.javaScriptErrorsCount=0},e.prototype.onStart=function(){this.javaScriptErrorsTracker.start()},e.prototype.onStop=function(){this.javaScriptErrorsTracker.stop()},e.prototype.getRequestPayload=function(){return JSON.stringify({errors:this.javaScriptErrorsBatch})},e.prototype.bindRequest=function(){var t=this;this.javaScriptErrorsRequest.setRequestParametersProviders(this.basicRequestParameters),this.javaScriptErrorsRequest.setRequestPayloadProvider(this),this.javaScriptErrorsRequest.after((function(){t.javaScriptErrorsBatch=[],t.javaScriptErrorsCount+=1}))},e.prototype.processEvent=function(t){this.isStarted&&this.javaScriptErrorsCount<20&&(t.rt=this.getRelativeTime(),this.javaScriptErrorsBatch.push(t),this.sendErrors())},e.prototype.getRelativeTime=function(){return N.now()-this.startTime},e.prototype.sendErrors=function(){this.javaScriptErrorsRequest.send()},e}(Nt),cr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ur=function(t){function e(e,i,n){var r=t.call(this)||this;return r.apiErrorsTracker=e,r.apiErrorsRequest=i,r.basicRequestParameters=n,r.apiErrorsBatch=[],r.apiErrorsCount=0,r}return cr(e,t),e.prototype.init=function(){var t=this;this.apiErrorsTracker.init(),this.apiErrorsTracker.onEvent((function(e){return t.processEvent(e)})),this.bindRequest()},e.prototype.initStates=function(){this.apiErrorsBatch=[],this.apiErrorsCount=0},e.prototype.onStart=function(){this.apiErrorsTracker.start()},e.prototype.onStop=function(){this.apiErrorsTracker.stop()},e.prototype.getRequestPayload=function(){return JSON.stringify({errors:this.apiErrorsBatch})},e.prototype.bindRequest=function(){var t=this;this.apiErrorsRequest.setRequestParametersProviders(this.basicRequestParameters),this.apiErrorsRequest.setRequestPayloadProvider(this),this.apiErrorsRequest.after((function(){t.apiErrorsBatch=[],t.apiErrorsCount+=1}))},e.prototype.processEvent=function(t){this.isStarted&&this.apiErrorsCount<e.MAX_ERRORS&&(this.apiErrorsBatch.push(t),this.sendErrors())},e.prototype.sendErrors=function(){this.apiErrorsRequest.send()},e.MAX_ERRORS=20,e}(Nt);!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(tr||(tr={}));var pr,hr=function(){function t(t,e,i,n){this.javaScriptErrorsTracker=t,this.apiErrorsTracker=e,this.configuration=i,this.basicRequestParameters=n}return t.prototype.init=function(){this.contentSecurityPolicyErrorsService=new or(new rr),this.contentSecurityPolicyErrorsService.init();var t=new yt(this.configuration.getTrackerUri(),"errors");this.javaScriptErrorsService=new ar(this.javaScriptErrorsTracker,t,this.basicRequestParameters),this.javaScriptErrorsService.init();var e=new yt(this.configuration.getTrackerUri(),"api-errors");this.apiErrorsTracker.excludeDomains([tr.CONTENTSQUARE,tr.CLICKTALE,tr.FAKE_TRACKER]),this.apiErrorsService=new ur(this.apiErrorsTracker,e,this.basicRequestParameters),this.apiErrorsService.init()},t.prototype.onInitTracking=function(){this.contentSecurityPolicyErrorsService.start()},t.prototype.onStartTracking=function(){this.configuration.jsErrorsEnabled&&this.javaScriptErrorsService.start(),this.configuration.apiErrorsEnabled&&this.apiErrorsService.start()},t.prototype.onAfterNaturalPageView=function(){this.javaScriptErrorsService.initStates(),this.apiErrorsService.initStates()},t.prototype.onAfterArtificialPageView=function(){this.javaScriptErrorsService.initStates(),this.apiErrorsService.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.javaScriptErrorsService.stop(),this.apiErrorsService.stop()},t.prototype.onOptout=function(){this.contentSecurityPolicyErrorsService.stop(),this.javaScriptErrorsService.stop(),this.apiErrorsService.stop()},t}(),lr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t.Set="set",t.Remove="remove"}(pr||(pr={}));var fr=function(){function t(t,e){this.configuration=t,this.cookieService=e,this.sameSite=Rn.None,this.isActivated=!1,this.setCookieBatch=[],this.removeCookieBatch=[]}return t.prototype.init=function(){this.sameSite=this.cookieService.isSameSiteSupported()?Rn.None:Rn.NotSet},t.prototype.setStates=function(t,e){this.currentDomainState=t,this.iframeDomainState=e},t.prototype.start=function(t){var e=this;this.iframeDomainState.init(this.getIframeDomain(),(function(i,n){var r=[e.currentDomainState.get()];n&&r.push(i);var o=Wn.select(r,e.configuration.lastTrackingDraw);e.isActivated=!0,e.currentDomainState.apply(o),t()})),this.iframe=this.iframeDomainState.openIframe()},t.prototype.setCookie=function(t,e,i){if(this.isActivated){var n={name:t,value:e,samesite:this.sameSite,secure:Tn.Yes};i&&(n.expires=Cn.toExpireDate(i).getTime()),this.addToSetCookieBatch(n)}},t.prototype.removeCookie=function(t){this.isActivated&&this.addToRemoveCookieBatch(t)},t.prototype.addToRemoveCookieBatch=function(t){this.removeCookieBatch=this.removeCookieBatch.filter((function(e){return e!==t})),this.setCookieBatch=this.setCookieBatch.filter((function(e){return e.name!==t})),this.removeCookieBatch.push(t),this.setBatchReadyCall()},t.prototype.addToSetCookieBatch=function(t){this.removeCookieBatch=this.removeCookieBatch.filter((function(e){return e!==t.name})),this.setCookieBatch=this.setCookieBatch.filter((function(e){return e.name!==t.name})),this.setCookieBatch.push(t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.sendMessagesBatchs()},t.prototype.sendMessagesBatchs=function(){if(this.setCookieBatch.length>0){var t=this.buildMessage(pr.Set,this.setCookieBatch);this.sendMessage(t),this.setCookieBatch=[]}if(this.removeCookieBatch.length>0){var e=this.buildMessage(pr.Remove,this.removeCookieBatch);this.sendMessage(e),this.removeCookieBatch=[]}},t.prototype.buildMessage=function(t,e){return{command:t,cookies:e,domain:null,pid:this.configuration.projectId}},t.prototype.sendMessage=function(t){var e="https://"+this.getIframeDomain();this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(t,e)},t.prototype.getIframeDomain=function(){return this.configuration.dualCollectionTagDomain&&"contentsquare.net"!==this.configuration.dualCollectionTagDomain?"cdnssl."+this.configuration.dualCollectionTagDomain:"csxd.contentsquare.net"},lr([$e(),et("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),dr=["_cs_id","_cs_s","_cs_cvars","_cs_ex"],vr=function(){function t(t,e){this.configuration=t,this.xdframeOpener=e}return t.prototype.init=function(t,e){this.xdframeOrigin="https://"+t,this.callback=e},t.prototype.openIframe=function(){var t=this;this.xdframeOpener.onMessage((function(e){t.handleXdframeMessage(e)})),this.xdframeOpener.onTimeout((function(){t.handleTimeout()})),this.xdframeOpener.start();var e=this.getXdframeUrl(this.xdframeOrigin);return this.xdframeOpener.open(e)},t.prototype.handleXdframeMessage=function(t){if(this.isXdframeMessage(t)){var e=t.data,i=!0;if(this.isXdframeErrorMessage(t))return void tt.warn("Error xdframe single domain: "+JSON.stringify(t.data)+" from "+t.origin);if(!ct.isRawDomainState(e))return void tt.warn("Unknown message format from xdframe single domain: "+JSON.stringify(t.data)+" from "+t.origin);ct.isValid(e)||(tt.warn("Invalid xdframe single domain state: "+JSON.stringify(t.data)+" from "+t.origin),i=!1),this.xdframeOpener.stop(),this.callback(ot.fromRaw(e),i)}},t.prototype.handleTimeout=function(){tt.warn("xdframe single domain: all messages not received")},t.prototype.isXdframeMessage=function(t){return t.origin===this.xdframeOrigin&&Ht(t.data)},t.prototype.isXdframeErrorMessage=function(t){return!!t.data.error},t.prototype.getXdframeUrl=function(t){var e=dr.join(",");return t+"/uxa/xdframe-single-domain-1.1.0.html?pid="+this.configuration.projectId+"&cookieNames="+e},t}(),gr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},yr=function(){function t(){var t=this;this.isStarted=!1,this.onEventCallbacks=[],this.useCapture=!1,this.eventHandler={boundElement:window,type:"error",listener:function(e){return t.errorListener(e)}}}return t.prototype.onEvent=function(t){this.onEventCallbacks.push(t)},t.prototype.start=function(){this.isStarted||(mt(this.eventHandler,this.useCapture),this.isStarted=!0)},t.prototype.stop=function(){this.isStarted&&(St(this.eventHandler,this.useCapture),this.isStarted=!1)},t.prototype.errorListener=function(t){var e=this.buildJavaScriptError(t);this.onEventCallbacks.forEach((function(t){return t(e)}))},t.prototype.decorateErrorMessage=function(e){return e.length<=t.MAX_ERROR_MESSAGE_LENGTH?e:e.slice(0,t.MAX_ERROR_MESSAGE_LENGTH-t.truncatedErrorMessageMarker.length)+t.truncatedErrorMessageMarker},t.prototype.buildJavaScriptError=function(t){return{errorType:"jsError",message:this.decorateErrorMessage(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},t.truncatedErrorMessageMarker="â€¦",t.MAX_ERROR_MESSAGE_LENGTH=1024,gr([et("Event handler type: error")],t.prototype,"errorListener",null),t}(),mr=function(){function t(t,e){this.commandsService=t,this.projectConfiguration=e}return t.prototype.init=function(){var t=this;this.commandsService.register("debugEvents",(function(e){"boolean"==typeof e&&t.projectConfiguration.updateDynamicFields("emitDebugEvents",e)}))},t}();function Sr(t,e,i){if(!Bt(e)&&!Bt(i))return t.href;var n=Bt(e)?function(t){return k(t,"/")?t:"/"+t}(e):t.pathname,r=Bt(i)?function(t){return k(t,"?")||""===t?t:"?"+t}(i):t.search;return t.protocol+"//"+t.host+n+r}var Er=function(){function t(t,e){this.location=t,this.pii=e}return t.prototype.overridePath=function(t){Bt(t)&&jt(t)&&(this.path=""===t?void 0:t)},t.prototype.overrideQuery=function(t){Bt(t)&&jt(t)&&(this.query=t)},t.prototype.getUrl=function(){return Sr(this.location,this.path,this.query)},t.prototype.getUrlProtocol=function(){return this.location.protocol},t.prototype.getRequestParameters=function(){var t=this.getUrl();return{url:this.pii.anonymize(t)}},t}(),wr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wr(e,t),e.prototype.emitPageEvent=function(t){for(var e=0,i=this.listeners;e<i.length;e++){var n=i[e];n.onPageEvent&&n.onPageEvent(t)}},e.prototype.emitEventTriggerRecording=function(t){for(var e=0,i=this.listeners;e<i.length;e++){var n=i[e];n.onEventTriggerRecording&&n.onEventTriggerRecording(t)}},e}(Nn),br=function(){this.isStarted=!1},Rr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tr=function(t){function e(e,i){var n=t.call(this)||this;return n.xhrRequestTracker=e,n.fetchRequestTracker=i,n.onEventCallbacks=[],n.excludedDomains=[],n}return Rr(e,t),e.prototype.init=function(){var t=this;this.xhrRequestTracker.onEvent((function(e){return t.apiErrorListener(e)})),this.fetchRequestTracker.onEvent((function(e){return t.apiErrorListener(e)}))},e.prototype.onEvent=function(t){this.onEventCallbacks.push(t)},e.prototype.start=function(){this.isStarted||(this.xhrRequestTracker.start(),this.fetchRequestTracker.start(),this.isStarted=!0)},e.prototype.stop=function(){this.isStarted&&(this.xhrRequestTracker.stop(),this.fetchRequestTracker.stop(),this.isStarted=!1)},e.prototype.apiErrorListener=function(t){if(t.url&&t.statusCode&&!this.excludedDomains.some((function(e){return-1!==t.url.indexOf(e)}))&&t.statusCode>=400){var e=this.buildApiError(t);this.onEventCallbacks.forEach((function(t){return t(e)}))}},e.prototype.buildApiError=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,requestHeaders:t.requestHeaders,responseHeaders:t.responseHeaders,statusCode:t.statusCode,message:this.decorateErrorMessage(t.message),library:t.library}},e.prototype.decorateErrorMessage=function(t){return t.length<=e.MAX_ERROR_MESSAGE_LENGTH?t:t.slice(0,e.MAX_ERROR_MESSAGE_LENGTH-e.truncatedErrorMessageMarker.length)+e.truncatedErrorMessageMarker},e.prototype.excludeDomains=function(t){var e;(e=this.excludedDomains).push.apply(e,t)},e.truncatedErrorMessageMarker="â€¦",e.MAX_ERROR_MESSAGE_LENGTH=1024,e}(br);function kr(){var t,e=(t=new Error).stack?t.stack.split("\n").filter((function(t){return"Error"!==t})):[];if(0===(e=e.filter((function(t){return"[native code]"!==t}))).length)return"";var i=function(t){return t.length>0?Or(t[0]):""}(e);return""===i||0===(e=function(t,e){return t.filter((function(t){return-1===t.indexOf(e)}))}(e,i)).length?"":Or(e[0])}function Or(t){var e="",i=(-1!==t.indexOf("@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return i&&(e=i[1]),e}var Pr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_r=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ar=function(t){function e(e){var i=t.call(this)||this;return i.monkeyPatcher=e,i.callbacks=[],i}return Pr(e,t),e.prototype.onEvent=function(t){this.callbacks.push(t)},e.prototype.start=function(){this.isStarted||(this.createInterceptors(),this.openInterceptor&&this.openInterceptor.activate(),this.setRequestHeaderInterceptor&&this.setRequestHeaderInterceptor.activate(),this.isStarted=!0)},e.prototype.createInterceptors=function(){var t=this;this.openInterceptor||(this.openInterceptor=this.monkeyPatcher.createFunctionInterceptor(XMLHttpRequest.prototype,"open",(function(e,i,n){return t.interceptOpen(e,n)}))),this.setRequestHeaderInterceptor||(this.setRequestHeaderInterceptor=this.monkeyPatcher.createFunctionInterceptor(XMLHttpRequest.prototype,"setRequestHeader",(function(e,i,n){return t.interceptSetRequestHeader(e,n)})))},e.prototype.stop=function(){this.isStarted&&(this.openInterceptor&&this.openInterceptor.deactivate(),this.setRequestHeaderInterceptor&&this.setRequestHeaderInterceptor.deactivate(),this.isStarted=!1)},e.prototype.interceptOpen=function(t,e){var i,n,r=this;t.apiCall={url:e[1],method:e[0],requestHeaders:null!==(n=null===(i=null==t?void 0:t.apiCall)||void 0===i?void 0:i.requestHeaders)&&void 0!==n?n:{},responseHeaders:{},requestTime:N.now(),responseTime:0,statusCode:0};var o=kr();o&&-1!==o.indexOf(".js")?t.apiCall.library=o:t.apiCall.library="",t.addEventListener("readystatechange",(function(t){return r.readyStateChangeListener(t.target)}))},e.prototype.readyStateChangeListener=function(t){var e,i;t.readyState===XMLHttpRequest.DONE&&(t.apiCall.responseTime=N.now(),t.apiCall.statusCode=t.status,t.apiCall.responseHeaders={},t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var i=e.split(":")[0],n=e.split(":")[1];t.apiCall.responseHeaders[i]=n})),""===t.responseType||"text"===t.responseType?t.apiCall.message=t.responseText:"json"===t.responseType?t.apiCall.message=JSON.stringify(t.response):"document"===t.responseType&&(null===(i=null===(e=t.response)||void 0===e?void 0:e.documentElement)||void 0===i?void 0:i.innerHTML)&&(t.apiCall.message=t.response.documentElement.innerHTML),this.callbacks.forEach((function(e){return e(t.apiCall)})))},e.prototype.interceptSetRequestHeader=function(t,e){var i=e[0],n=e[1];t.apiCall||(t.apiCall={url:"",method:"",requestHeaders:{},responseHeaders:{},requestTime:0,responseTime:0,statusCode:0,message:""}),i in t.apiCall.requestHeaders?t.apiCall.requestHeaders[i]+=", "+n:t.apiCall.requestHeaders[i]=n},_r([et("XhrRequestTracker.interceptOpen")],e.prototype,"interceptOpen",null),_r([et("XhrRequestTracker.readyStateChangeListener")],e.prototype,"readyStateChangeListener",null),_r([et("XhrRequestTracker.interceptSetRequestHeader")],e.prototype,"interceptSetRequestHeader",null),e}(br),Ir=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Lr=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},xr=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Mr=function(t){function e(e){var i=t.call(this)||this;return i.monkeyPatcher=e,i.callbacks=[],i}return Ir(e,t),e.prototype.onEvent=function(t){this.callbacks.push(t)},e.prototype.start=function(){this.canTrackFetch()&&!this.isStarted&&(this.createFetchInterceptor(),this.fetchInterceptor&&this.fetchInterceptor.activate(),this.isStarted=!0)},e.prototype.canTrackFetch=function(){return!!window.fetch&&"function"==typeof window.fetch},e.prototype.createFetchInterceptor=function(){var t=this;this.fetchInterceptor||(this.fetchInterceptor=this.monkeyPatcher.createFunctionInterceptor(window,"fetch",(function(e,i,n){var r=kr();t.interceptFetch(i,n,r)})))},e.prototype.stop=function(){this.isStarted&&(this.fetchInterceptor&&this.fetchInterceptor.deactivate(),this.isStarted=!1)},e.prototype.interceptFetch=function(t,e,i){return Lr(this,void 0,void 0,(function(){var n,r,o,s,a,c,u;return xr(this,(function(p){switch(p.label){case 0:return p.trys.push([0,3,,4]),n=e[0],r=e[1],o=new Request(n,r),s={url:o.url,method:o.method,requestHeaders:{},responseHeaders:{},requestTime:N.now(),responseTime:0,statusCode:0,message:""},i&&-1!==i.indexOf(".js")?s.library=i:s.library="",o.headers.forEach((function(t,e){s.requestHeaders[e]=t})),[4,t];case 1:return a=p.sent().clone(),s.responseTime=N.now(),a.type.indexOf("opaque")>-1?s.statusCode=-1:s.statusCode=a.status,a.headers.forEach((function(t,e){s.responseHeaders[e]=t})),c=s,[4,a.text()];case 2:return c.message=p.sent(),this.callbacks.forEach((function(t){return t(s)})),[3,4];case 3:return u=p.sent(),tt.error("Error in FetchRequestTracker.interceptFetch:"+u+")"),[3,4];case 4:return[2]}}))}))},Nr([et("FetchRequestTracker.interceptFetch")],e.prototype,"interceptFetch",null),e}(br),Dr=function(){function t(t,e,i){this.configuration=t,this.pii=e,this.cookieChecker=i}return t.prototype.init=function(){var t=this,e=new Bn,i=new Xn(this.configuration,e,this.pii),n=new Er(window.location,this.pii),r=new An(this.configuration,n,this.cookieChecker);r.init();var o=new jn(window.location,r),s=new fr(this.configuration,r);s.init();var a=new at(r,s),c=new On(this.configuration,a,o,r,s),u=new kn(this.configuration,c,r,s);tt.setContext(u,c);var p=new In(this.configuration,r,u,c),h=new pt(window.location,r,s),l=new zn(h),f=new Pn(this.configuration,u,h),d=new nt(u,c,h,this.configuration,r,s),v=new dt,g=new lt(v,window.location),y=new Zn(this.configuration,d,g),m=new vr(this.configuration,v);s.setStates(d,m);var S=new wn(this.configuration,u,h,f,p,y,s,o);return i.init(),S.compute((function(e){var i=new ir,o=new $n(i),a=new Cr,p=new xn,h=new Dn(r),f=new Un(t.configuration,h,p,r),d=new qn(i,f),v=new Yn(p,window.location,r),g=new Kn(i,v),y=new mr(i,t.configuration),m=new Ki(t.configuration,u,c),S=new yr,E=new ze,w=new Ar(E),C=new Mr(E),b=new Tr(w,C),R=new hr(S,b,t.configuration,m);(R.init(),p.addListeners(R),e)?(p.emitInitTracking(),new En(u,c,p,i,o,t.configuration,g,v,d,f,t.pii,r,s,n,y,a,S).start()):new Vn(p,i,o,g,v,l,d).start()})),{LZString:Pt}},t}(),qr=function(){function t(t){this.window=t,this.cookieEnabled=!1,this.useSameSiteNoneSecureCookie=!1}return t.prototype.init=function(){if("cookie"in document){if(this.window.self===this.window.top&&Cn.isCookiePresent())return this.cookieEnabled=!0,void(this.useSameSiteNoneSecureCookie=!1);if(Cn.set("_cs_t","1",Cn.CURRENT_DOMAIN),null!==Cn.get("_cs_t"))return this.cookieEnabled=!0,this.useSameSiteNoneSecureCookie=!1,void Cn.remove("_cs_t",Cn.CURRENT_DOMAIN);Cn.set("_cs_t","1",Cn.CURRENT_DOMAIN,void 0,Rn.None,Tn.Yes),null!==Cn.get("_cs_t")&&(this.cookieEnabled=!0,this.useSameSiteNoneSecureCookie=!0,Cn.remove("_cs_t",Cn.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.cookieEnabled},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.useSameSiteNoneSecureCookie},t}(),Ur=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};try{var Vr=new L(window.CS_CONF);window._uxa=window._uxa||[],Vr.processOptionOverrides(window._uxa);var zr=new z;tt.init(Vr,zr),function(){function t(){}return t.start=function(){var t=new qr(window);t.init();var e=new q(Vr,t);if(!window.UXAnalytics&&e.canTrack()){var i=new Dr(Vr,zr,t);window.UXAnalytics=i.init()}!window.CSFrameCommunication&&x.isActivable()&&(window.CSFrameCommunication=x,x.waitForConnection())},Ur([et("index.start")],t,"start",null),t}().start()}catch(t){}}]);